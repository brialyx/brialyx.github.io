<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>I06 â€” VxLAN Â· Network+</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Epilogue:wght@400;600;800;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #07090f; --bg2: #0d1117; --card: #111826;
    --border: #1c2a3a; --text: #dde4f0; --muted: #536070;
    --accent: #38bdf8; --green: #22d3a0; --amber: #fbbf24;
    --red: #f87171; --purple: #a78bfa; --cyan: #06b6d4;
  }
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body { background: var(--bg); color: var(--text); font-family: 'Epilogue', sans-serif; min-height: 100vh; line-height: 1.75; }
  body::before { content: ''; position: fixed; inset: 0; background-image: radial-gradient(rgba(56,189,248,0.06) 1px, transparent 1px); background-size: 28px 28px; pointer-events: none; z-index: 0; }
  .wrap { max-width: 860px; margin: 0 auto; padding: 48px 20px 100px; position: relative; z-index: 1; }

  .breadcrumb { font-family: 'IBM Plex Mono', monospace; font-size: 0.68rem; color: var(--muted); letter-spacing: 1px; margin-bottom: 24px; display: flex; align-items: center; gap: 8px; }
  .breadcrumb span { color: var(--accent); }
  .pills { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
  .pill { font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; letter-spacing: 1px; text-transform: uppercase; padding: 4px 12px; border-radius: 6px; font-weight: 600; }
  .pill-phase { color: var(--accent); background: rgba(56,189,248,0.08); border: 1px solid rgba(56,189,248,0.2); }
  .pill-key   { color: var(--purple); background: rgba(167,139,250,0.08); border: 1px solid rgba(167,139,250,0.2); }
  .pill-lab   { color: var(--green);  background: rgba(34,211,160,0.08);  border: 1px solid rgba(34,211,160,0.2); }
  .pill-exam  { color: var(--red);    background: rgba(248,113,113,0.08);  border: 1px solid rgba(248,113,113,0.2); }
  .pill-proto { color: var(--cyan);   background: rgba(6,182,212,0.08);   border: 1px solid rgba(6,182,212,0.2); }
  .pill-new   { color: var(--amber);  background: rgba(251,191,36,0.08);  border: 1px solid rgba(251,191,36,0.2); }
  .pill-diff  { color: var(--amber);  background: rgba(251,191,36,0.08);  border: 1px solid rgba(251,191,36,0.2); }

  h1 { font-size: clamp(1.8rem, 4vw, 2.8rem); font-weight: 900; line-height: 1.05; letter-spacing: -1px; margin-bottom: 8px; }
  h1 span { color: var(--accent); }
  .tagline { font-family: 'IBM Plex Mono', monospace; font-size: 0.78rem; color: var(--muted); margin-bottom: 36px; display: block; }

  .mastery-card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 20px 24px; margin-bottom: 36px; }
  .mastery-title { font-family: 'IBM Plex Mono', monospace; font-size: 0.68rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 14px; }
  .mastery-checks { display: flex; flex-direction: column; gap: 8px; }
  .mcheck { display: flex; align-items: center; gap: 12px; cursor: pointer; user-select: none; padding: 8px 12px; border-radius: 8px; transition: background 0.15s; }
  .mcheck:hover { background: rgba(56,189,248,0.04); }
  .mcheck-box { width: 18px; height: 18px; border: 1.5px solid var(--border); border-radius: 5px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 10px; color: transparent; transition: all 0.18s; }
  .mcheck-box.done { background: var(--green); border-color: var(--green); color: #fff; }
  .mcheck-label { font-size: 0.88rem; transition: color 0.2s; }
  .mcheck.done .mcheck-label { color: var(--muted); text-decoration: line-through; }
  .mastery-bar-wrap { height: 4px; background: var(--border); border-radius: 99px; margin-top: 16px; overflow: hidden; }
  .mastery-bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--green), var(--accent)); border-radius: 99px; transition: width 0.4s ease; }

  .section { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 28px 30px; margin-bottom: 16px; }
  .section-label { font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; color: var(--muted); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 16px; display: flex; align-items: center; gap: 10px; }
  .section-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }
  h2 { font-size: 1.15rem; font-weight: 800; margin-bottom: 14px; }
  h3 { font-size: 0.95rem; font-weight: 700; color: var(--accent); margin: 22px 0 10px; font-family: 'IBM Plex Mono', monospace; }
  p { margin-bottom: 14px; font-size: 0.92rem; }

  .callout { border-radius: 10px; padding: 14px 18px; margin: 14px 0; font-size: 0.88rem; display: flex; gap: 12px; align-items: flex-start; }
  .callout-icon { flex-shrink: 0; font-size: 1rem; margin-top: 1px; }
  .callout-body { flex: 1; line-height: 1.65; }
  .callout-body strong { display: block; margin-bottom: 4px; font-size: 0.85rem; }
  .callout.analogy { background: rgba(167,139,250,0.07); border: 1px solid rgba(167,139,250,0.2); }
  .callout.analogy .callout-body strong { color: var(--purple); }
  .callout.tip  { background: rgba(56,189,248,0.06);  border: 1px solid rgba(56,189,248,0.18); }
  .callout.tip .callout-body strong { color: var(--accent); }
  .callout.warn { background: rgba(248,113,113,0.07); border: 1px solid rgba(248,113,113,0.2); }
  .callout.warn .callout-body strong { color: var(--red); }
  .callout.exam { background: rgba(251,191,36,0.07);  border: 1px solid rgba(251,191,36,0.2); }
  .callout.exam .callout-body strong { color: var(--amber); }
  .callout.ok   { background: rgba(34,211,160,0.07);  border: 1px solid rgba(34,211,160,0.2); }
  .callout.ok .callout-body strong { color: var(--green); }

  .tbl-wrap { overflow-x: auto; margin: 16px 0; }
  table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
  th { background: var(--bg2); color: var(--muted); font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; text-transform: uppercase; letter-spacing: 1px; padding: 10px 14px; text-align: left; border-bottom: 1px solid var(--border); }
  td { padding: 10px 14px; border-bottom: 1px solid rgba(28,42,58,0.6); vertical-align: top; }
  tr:last-child td { border-bottom: none; }
  tr:hover td { background: rgba(56,189,248,0.02); }
  td strong { color: var(--accent); }
  code { font-family: 'IBM Plex Mono', monospace; font-size: 0.8rem; color: var(--accent); background: rgba(56,189,248,0.08); padding: 1px 5px; border-radius: 4px; }

  .trap-box { background: rgba(248,113,113,0.05); border: 2px solid var(--red); border-radius: 10px; padding: 18px 22px; margin: 20px 0; }
  .trap-title { font-family: 'IBM Plex Mono', monospace; font-weight: 800; font-size: 0.85rem; color: var(--red); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px; }
  .trap-content { font-size: 0.88rem; line-height: 1.8; }

  .comptia-box { background: rgba(251,191,36,0.05); border: 2px solid var(--amber); border-radius: 10px; padding: 18px 22px; margin: 20px 0; }
  .comptia-title { font-family: 'IBM Plex Mono', monospace; font-weight: 800; font-size: 0.85rem; color: var(--amber); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px; }
  .comptia-content { font-size: 0.88rem; line-height: 1.8; }

  .kp { display: flex; gap: 10px; align-items: flex-start; font-size: 0.88rem; padding: 9px 0; border-bottom: 1px solid rgba(28,42,58,0.5); }
  .kp:last-child { border-bottom: none; }
  .kp-dot { color: var(--accent); font-weight: 900; flex-shrink: 0; margin-top: 2px; }

  .exq { background: var(--bg2); border: 1px solid var(--border); border-radius: 8px; padding: 12px 16px; margin-bottom: 8px; font-size: 0.85rem; cursor: pointer; display: flex; align-items: flex-start; gap: 12px; transition: border-color 0.2s; }
  .exq:hover { border-color: rgba(56,189,248,0.25); }
  .exq-num { font-family: 'IBM Plex Mono', monospace; color: var(--muted); min-width: 24px; flex-shrink: 0; margin-top: 2px; }
  .exq-text { flex: 1; color: var(--text); }
  .exq-reveal { font-family: 'IBM Plex Mono', monospace; color: var(--muted); font-size: 0.7rem; white-space: nowrap; margin-top: 2px; }
  .exq-answer { display: none; background: rgba(34,211,160,0.06); border: 1px solid rgba(34,211,160,0.2); border-radius: 8px; padding: 12px 16px; font-size: 0.85rem; color: var(--green); margin-bottom: 10px; line-height: 1.8; }
  .exq-answer.visible { display: block; }

  .nav-footer { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; margin-top: 48px; padding-top: 28px; border-top: 1px solid var(--border); }
  .nav-btn { font-family: 'IBM Plex Mono', monospace; font-size: 0.72rem; padding: 10px 18px; border-radius: 8px; transition: all 0.2s; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; border: 1px solid var(--border); background: var(--card); color: var(--muted); }
  .nav-btn.next { background: rgba(56,189,248,0.08); border-color: rgba(56,189,248,0.25); color: var(--accent); }
  .nav-btn.next:hover { background: rgba(56,189,248,0.15); }

  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 99px; }
</style>
</head>
<body>
<div class="wrap">

  <div class="breadcrumb">Network+ N10-009 &nbsp;â€º&nbsp; <span>Module 2.0 â€” ImplÃ©mentation</span> &nbsp;â€º&nbsp; Cours 6</div>

  <div class="pills">
    <span class="pill pill-phase">Phase 2 Â· I06</span>
    <span class="pill pill-new">ğŸ†• NEW</span>
    <span class="pill pill-key">ğŸ”‘ KEY</span>
    <span class="pill pill-diff">âš¡âš¡âš¡ Difficile</span>
  </div>

  <h1><span>VxLAN</span></h1>
  <span class="tagline">// Virtual Extensible LAN â€” overlay rÃ©seau pour datacenters, VTEP, encapsulation UDP 4789</span>

  <div class="mastery-card">
    <div class="mastery-title">Suivi de maÃ®trise</div>
    <div class="mastery-checks">
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">âœ“</div><span class="mcheck-label">J'ai lu ce cours en entier</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">âœ“</div><span class="mcheck-label">Je comprends les limites des VLANs traditionnels</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">âœ“</div><span class="mcheck-label">Je maÃ®trise le concept d'overlay network</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">âœ“</div><span class="mcheck-label">Je connais VTEP et VNI</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">âœ“</div><span class="mcheck-label">Je comprends l'encapsulation VxLAN</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">âœ“</div><span class="mcheck-label">J'ai rÃ©ussi tous les exercices sans regarder le cours</span></div>
    </div>
    <div class="mastery-bar-wrap"><div class="mastery-bar-fill" id="mastBar"></div></div>
  </div>

  <!-- 1. PROBLÃˆME -->
  <div class="section">
    <div class="section-label">Avant de commencer</div>
    <h2>Le problÃ¨me â€” limites des VLANs traditionnels</h2>

    <div class="callout analogy">
      <span class="callout-icon">ğŸ™ï¸</span>
      <div class="callout-body">
        <strong>Analogie â€” rÃ©seau postal</strong>
        VLAN traditionnel = codes postaux limitÃ©s Ã  4096 valeurs (12 bits). VxLAN = nouveau systÃ¨me avec 16 millions de codes (24 bits). Tu peux maintenant isoler des millions de clients dans le mÃªme datacenter au lieu de seulement 4000.
      </div>
    </div>

    <p><strong>VLANs traditionnels (802.1Q)</strong> ont des limitations critiques pour les datacenters modernes :</p>

    <h3>// Limitation 1 : Seulement 4096 VLANs</h3>
    <p>Le tag VLAN = <strong>12 bits</strong> â†’ 2^12 = 4096 VLANs maximum (0-4095).</p>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>Datacenter cloud avec 10,000 clients â†’ impossible d'isoler chacun</li>
      <li>Multi-tenancy (SaaS, IaaS) â†’ besoin millions de segments isolÃ©s</li>
      <li>4096 VLANs Ã©puisÃ©s rapidement dans grands rÃ©seaux</li>
    </ul>

    <h3>// Limitation 2 : Pas de mobilitÃ© entre sites</h3>
    <p>VLANs limitÃ©s au mÃªme domaine Layer 2 (mÃªme switch ou switches interconnectÃ©s directement).</p>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>VM migre d'un datacenter Ã  l'autre â†’ perd son VLAN</li>
      <li>Stretching Layer 2 entre datacenters = complexe et fragile</li>
      <li>Pas de multi-site transparent</li>
    </ul>

    <h3>// Limitation 3 : DÃ©pendance au rÃ©seau physique</h3>
    <p>VLANs = configuration switch par switch, pas flexible, pas programmable.</p>

    <div class="callout warn">
      <span class="callout-icon">âš ï¸</span>
      <div class="callout-body">
        <strong>Datacenters modernes = impossible avec VLANs</strong>
        Cloud providers (AWS, Azure, GCP), VMware NSX, OpenStack, conteneurs Kubernetes â†’ tous nÃ©cessitent plus de 4096 segments isolÃ©s. VLANs traditionnels = inadaptÃ©s.
      </div>
    </div>
  </div>

  <!-- 2. C'EST QUOI VXLAN -->
  <div class="section">
    <div class="section-label">Concept</div>
    <h2>VxLAN â€” rÃ©seau overlay Layer 2 sur Layer 3</h2>

    <p><strong>VxLAN (Virtual Extensible LAN)</strong> = technologie d'encapsulation qui crÃ©Ã© des rÃ©seaux virtuels Layer 2 (overlay) par-dessus infrastructure IP Layer 3 (underlay).</p>

    <h3>// Principes clÃ©s</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li><strong>24 bits VNI</strong> (VXLAN Network Identifier) â†’ 16 millions de segments (2^24)</li>
      <li><strong>Encapsulation MAC-in-UDP</strong> â†’ trame Ethernet encapsulÃ©e dans paquet UDP</li>
      <li><strong>Port UDP 4789</strong> (standard IANA)</li>
      <li><strong>VTEP</strong> (VXLAN Tunnel Endpoint) â†’ Ã©quipement qui encapsule/dÃ©sencapsule</li>
      <li><strong>Overlay network</strong> â†’ rÃ©seau virtuel indÃ©pendant du rÃ©seau physique</li>
    </ul>

    <h3>// VxLAN vs VLAN</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>CritÃ¨re</th><th>VLAN (802.1Q)</th><th>VxLAN</th></tr>
        <tr><td><strong>Identifiant</strong></td><td>12 bits (4096 max)</td><td>24 bits (16 millions)</td></tr>
        <tr><td><strong>Couche</strong></td><td>Layer 2 uniquement</td><td>Layer 2 over Layer 3</td></tr>
        <tr><td><strong>PortÃ©e</strong></td><td>Domaine Layer 2 (mÃªme site)</td><td>Multi-site, WAN, Internet</td></tr>
        <tr><td><strong>MobilitÃ© VM</strong></td><td>âŒ LimitÃ©e (mÃªme L2 domain)</td><td>âœ… Entre datacenters</td></tr>
        <tr><td><strong>ScalabilitÃ©</strong></td><td>âš ï¸ Faible (4096)</td><td>âœ… TrÃ¨s Ã©levÃ©e (16M)</td></tr>
        <tr><td><strong>Multi-tenancy</strong></td><td>âŒ Impossible (>4096 clients)</td><td>âœ… Millions de clients</td></tr>
        <tr><td><strong>Encapsulation</strong></td><td>Tag 802.1Q (4 bytes)</td><td>MAC-in-UDP (50 bytes overhead)</td></tr>
      </table>
    </div>

    <div class="callout tip">
      <span class="callout-icon">ğŸ¯</span>
      <div class="callout-body">
        <strong>Pour l'examen Network+</strong>
        CompTIA teste : diffÃ©rence VLAN vs VxLAN, concept overlay/underlay, VTEP, VNI (24 bits = 16 millions), port UDP 4789, cas d'usage datacenters/cloud. Nouveau en N10-009 !
      </div>
    </div>
  </div>

  <!-- 3. ARCHITECTURE -->
  <div class="section">
    <div class="section-label">Architecture</div>
    <h2>Overlay vs Underlay â€” deux rÃ©seaux superposÃ©s</h2>

    <h3>// Underlay network (rÃ©seau physique)</h3>
    <p>Infrastructure IP Layer 3 physique qui transporte le trafic encapsulÃ©.</p>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>Routeurs, switches Layer 3</li>
      <li>Routage IP classique (OSPF, BGP...)</li>
      <li>Ne connaÃ®t PAS les VxLAN, voit juste paquets UDP</li>
      <li>Fourni connectivitÃ© entre VTEPs</li>
    </ul>

    <h3>// Overlay network (rÃ©seau virtuel)</h3>
    <p>RÃ©seau Layer 2 virtuel crÃ©Ã© par encapsulation VxLAN par-dessus underlay.</p>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>VMs, conteneurs communiquent comme si mÃªme VLAN</li>
      <li>Totalement indÃ©pendant du rÃ©seau physique</li>
      <li>Programmable, flexible, mobile</li>
      <li>GÃ©rÃ© par SDN controller (VMware NSX, Cisco ACI...)</li>
    </ul>

    <div style="background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:14px 18px;margin:14px 0;font-family:'IBM Plex Mono',monospace;font-size:0.7rem;line-height:1.8;">
      <strong style="color:var(--green)">Architecture VxLAN :</strong><br><br>

      [VM A] â†â†’ [VTEP 1] â†â†’ [ RÃ©seau IP Underlay ] â†â†’ [VTEP 2] â†â†’ [VM B]<br>
         â†‘           â†‘              (routeurs)              â†‘           â†‘<br>
      Overlay    Encap                                  DÃ©cap      Overlay<br>
      Layer 2    VxLAN                                  VxLAN      Layer 2<br><br>

      VM A et VM B pensent Ãªtre sur mÃªme VLAN<br>
      â†’ En rÃ©alitÃ© sÃ©parÃ©es par rÃ©seau IP routÃ©
    </div>

    <div class="callout ok">
      <span class="callout-icon">ğŸ’¡</span>
      <div class="callout-body">
        <strong>Overlay = abstraction</strong>
        Underlay = rÃ©seau physique (comment paquets sont routÃ©s physiquement)<br>
        Overlay = rÃ©seau virtuel (comment VMs/conteneurs communiquent logiquement)<br>
        VxLAN dÃ©couple les deux â†’ flexibilitÃ© maximale
      </div>
    </div>
  </div>

  <!-- 4. VTEP -->
  <div class="section">
    <div class="section-label">Composants</div>
    <h2>VTEP â€” VXLAN Tunnel Endpoint</h2>

    <p><strong>VTEP (VXLAN Tunnel Endpoint)</strong> = Ã©quipement qui encapsule/dÃ©sencapsule trames VxLAN. C'est le pont entre overlay et underlay.</p>

    <h3>// RÃ´le VTEP</h3>
    <ol style="margin:10px 0 16px 24px;line-height:1.9">
      <li><strong>Encapsulation (envoi)</strong> : Trame Ethernet originale â†’ ajoute en-tÃªte VxLAN â†’ encapsule dans UDP/IP â†’ envoie sur underlay</li>
      <li><strong>DÃ©sencapsulation (rÃ©ception)</strong> : Paquet UDP reÃ§u â†’ extrait trame Ethernet originale â†’ forward vers VM/conteneur</li>
      <li><strong>Apprentissage MAC</strong> : Associe MACs VMs avec VTEPs distants (comme switch apprend MACs)</li>
      <li><strong>Tunneling</strong> : Maintient tunnels VxLAN vers autres VTEPs</li>
    </ol>

    <h3>// Types de VTEP</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>Type</th><th>Localisation</th><th>Exemples</th></tr>
        <tr>
          <td><strong>Hardware VTEP</strong></td>
          <td>Switch Top-of-Rack (ToR)</td>
          <td>Cisco Nexus, Arista, Juniper QFX</td>
        </tr>
        <tr>
          <td><strong>Software VTEP</strong></td>
          <td>Hyperviseur (serveur)</td>
          <td>VMware ESXi, Linux VXLAN kernel, OVS</td>
        </tr>
      </table>
    </div>

    <h3>// Exemple : Envoi trame VM A â†’ VM B</h3>
    <div style="background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:14px 18px;margin:14px 0;font-family:'IBM Plex Mono',monospace;font-size:0.75rem;line-height:1.8;">
      <strong style="color:var(--green)">1. VM A envoie trame Ethernet classique</strong><br>
      Trame : [MAC dest: VM B] [MAC src: VM A] [Data]<br><br>

      <strong style="color:var(--accent)">2. VTEP 1 reÃ§oit trame, encapsule</strong><br>
      â†’ Ajoute en-tÃªte VxLAN (VNI = 5000)<br>
      â†’ Encapsule dans UDP (port 4789)<br>
      â†’ Encapsule dans IP (dest = VTEP 2)<br>
      Paquet : [IP: VTEP1â†’VTEP2] [UDP: 4789] [VxLAN: VNI 5000] [Trame originale]<br><br>

      <strong style="color:var(--amber)">3. RÃ©seau underlay route paquet IP vers VTEP 2</strong><br>
      (Routage classique, ne voit que paquet UDP)<br><br>

      <strong style="color:var(--purple)">4. VTEP 2 reÃ§oit, dÃ©sencapsule</strong><br>
      â†’ Extrait trame Ethernet originale<br>
      â†’ Forward vers VM B<br><br>

      <strong style="color:var(--green)">5. VM B reÃ§oit trame comme si mÃªme switch</strong>
    </div>
  </div>

  <!-- 5. VNI -->
  <div class="section">
    <div class="section-label">Identifiant</div>
    <h2>VNI â€” VXLAN Network Identifier</h2>

    <p><strong>VNI (VXLAN Network Identifier)</strong> = identifiant 24 bits qui identifie le segment VxLAN (Ã©quivalent VLAN ID mais plus grand).</p>

    <h3>// CaractÃ©ristiques VNI</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li><strong>24 bits</strong> â†’ 2^24 = <strong>16,777,216</strong> VNIs possibles (0 Ã  16,777,215)</li>
      <li>Ã‰quivalent VLAN ID mais beaucoup plus scalable</li>
      <li>Chaque VNI = segment Layer 2 isolÃ©</li>
      <li>VMs dans mÃªme VNI communiquent, VMs dans VNIs diffÃ©rents = isolÃ©es</li>
    </ul>

    <h3>// Mapping VNI â†” VLAN</h3>
    <p>Souvent, VNI mappÃ© sur VLAN traditionnel au niveau VTEP :</p>

    <div style="background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:14px 18px;margin:14px 0;font-family:'IBM Plex Mono',monospace;font-size:0.75rem;line-height:1.8;">
      VLAN 10 (local switch) â†â†’ VNI 5000 (VxLAN overlay)<br>
      VLAN 20 (local switch) â†â†’ VNI 5001 (VxLAN overlay)<br><br>

      VM dans VLAN 10 â†’ VTEP encapsule avec VNI 5000<br>
      â†’ Tunnel VxLAN â†’ VTEP distant dÃ©sencapsule â†’ VLAN 10 local
    </div>

    <h3>// Comparaison VLAN ID vs VNI</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>CritÃ¨re</th><th>VLAN ID</th><th>VNI</th></tr>
        <tr><td><strong>Taille</strong></td><td>12 bits</td><td>24 bits</td></tr>
        <tr><td><strong>Valeurs max</strong></td><td>4096</td><td>16,777,216</td></tr>
        <tr><td><strong>Plage</strong></td><td>0-4095</td><td>0-16,777,215</td></tr>
        <tr><td><strong>Usage</strong></td><td>Segmentation locale</td><td>Segmentation datacenter/cloud</td></tr>
      </table>
    </div>

    <div class="callout exam">
      <span class="callout-icon">ğŸ¯</span>
      <div class="callout-body">
        <strong>Question type examen</strong>
        "Combien de segments VxLAN maximum ?"<br><br>
        <strong>RÃ©ponse : 16,777,216</strong> (2^24, VNI = 24 bits)<br><br>
        Pas 4096 (c'est VLAN) !
      </div>
    </div>
  </div>

  <!-- 6. ENCAPSULATION -->
  <div class="section">
    <div class="section-label">Protocole</div>
    <h2>Encapsulation VxLAN â€” MAC-in-UDP</h2>

    <p><strong>Encapsulation VxLAN</strong> = trame Ethernet originale encapsulÃ©e dans UDP/IP avec en-tÃªte VxLAN.</p>

    <h3>// Structure paquet VxLAN</h3>
    <div style="background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:14px 18px;margin:14px 0;font-family:'IBM Plex Mono',monospace;font-size:0.7rem;line-height:1.8;">
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>
      â”‚ Outer Ethernet (14B)                        â”‚<br>
      â”‚ MAC src = VTEP 1, MAC dest = next hop       â”‚<br>
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>
      â”‚ Outer IP (20B)                              â”‚<br>
      â”‚ IP src = VTEP 1, IP dest = VTEP 2           â”‚<br>
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>
      â”‚ Outer UDP (8B)                              â”‚<br>
      â”‚ Source port = random, Dest port = 4789      â”‚<br>
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>
      â”‚ VxLAN Header (8B)                           â”‚<br>
      â”‚ Flags, VNI (24 bits), Reserved              â”‚<br>
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤<br>
      â”‚ Inner Ethernet Frame (original)             â”‚<br>
      â”‚ Trame Ethernet complÃ¨te de la VM            â”‚<br>
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br><br>

      Overhead total : ~50 bytes
    </div>

    <h3>// En-tÃªte VxLAN (8 bytes)</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>Champ</th><th>Taille</th><th>Description</th></tr>
        <tr><td><strong>Flags</strong></td><td>8 bits</td><td>Bit I = 1 (VNI valide)</td></tr>
        <tr><td><strong>Reserved</strong></td><td>24 bits</td><td>RÃ©servÃ© (0)</td></tr>
        <tr><td><strong>VNI</strong></td><td>24 bits</td><td>VXLAN Network Identifier</td></tr>
        <tr><td><strong>Reserved</strong></td><td>8 bits</td><td>RÃ©servÃ© (0)</td></tr>
      </table>
    </div>

    <h3>// Port UDP 4789</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li><strong>Port destination</strong> : 4789 (standard IANA)</li>
      <li><strong>Port source</strong> : AlÃ©atoire (Ã©phÃ©mÃ¨re), basÃ© sur hash inner frame</li>
      <li>Hash inner frame â†’ load balancing ECMP sur underlay</li>
    </ul>

    <div class="callout warn">
      <span class="callout-icon">âš ï¸</span>
      <div class="callout-body">
        <strong>MTU et fragmentation</strong>
        Overhead VxLAN (~50 bytes) â†’ MTU effectif rÃ©duit.<br>
        MTU underlay 1500 â†’ MTU overlay ~1450<br>
        Solution : Jumbo frames sur underlay (MTU 9000) ou ajuster MTU VMs
      </div>
    </div>
  </div>

  <!-- 7. CAS D'USAGE -->
  <div class="section">
    <div class="section-label">Applications</div>
    <h2>Cas d'usage VxLAN â€” quand l'utiliser ?</h2>

    <h3>// 1. Datacenters multi-tenants (cloud providers)</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>AWS, Azure, GCP : millions de clients isolÃ©s</li>
      <li>Chaque client = VNI unique</li>
      <li>Isolation totale entre tenants</li>
    </ul>

    <h3>// 2. Virtualisation / SDN</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>VMware NSX, Cisco ACI, OpenStack Neutron</li>
      <li>MobilitÃ© VM entre hosts/sites</li>
      <li>RÃ©seaux programmables via API</li>
    </ul>

    <h3>// 3. Datacenters distribuÃ©s</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>Stretching Layer 2 entre sites gÃ©ographiques</li>
      <li>DCI (Data Center Interconnect)</li>
      <li>Active-active datacenters</li>
    </ul>

    <h3>// 4. Conteneurs (Kubernetes)</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>CNI plugins (Calico, Flannel...)</li>
      <li>Isolation entre namespaces</li>
      <li>Networking pods cross-hosts</li>
    </ul>

    <h3>// Quand NE PAS utiliser VxLAN ?</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>âŒ Petits rÃ©seaux (<100 VMs) â†’ VLANs suffisent</li>
      <li>âŒ Pas de multi-tenancy â†’ overhead inutile</li>
      <li>âŒ Ã‰quipements ne supportent pas â†’ mise Ã  jour nÃ©cessaire</li>
      <li>âŒ Latence critique â†’ overhead encapsulation peut impacter</li>
    </ul>
  </div>

  <!-- 8. CE QUI TROMPE LES CANDIDATS -->
  <div class="section">
    <div class="section-label">âš ï¸ PiÃ¨ges d'examen</div>
    <h2>Ce qui trompe les candidats</h2>

    <div class="trap-box">
      <div class="trap-title">âŒ PiÃ¨ge #1 : VxLAN = 4096 segments</div>
      <div class="trap-content">
        <strong>FAUX</strong>. VxLAN = <strong>16,777,216</strong> segments (2^24).<br><br>
        4096 = VLAN (12 bits)<br>
        16 millions = VxLAN (24 bits VNI)
      </div>
    </div>

    <div class="trap-box">
      <div class="trap-title">âŒ PiÃ¨ge #2 : VxLAN port TCP 4789</div>
      <div class="trap-content">
        <strong>FAUX</strong>. VxLAN utilise <strong>UDP port 4789</strong> (pas TCP).<br><br>
        UDP = sans connexion, appropriÃ© pour encapsulation
      </div>
    </div>

    <div class="trap-box">
      <div class="trap-title">âŒ PiÃ¨ge #3 : VxLAN = Layer 3 uniquement</div>
      <div class="trap-content">
        <strong>FAUX</strong>. VxLAN = <strong>Layer 2 over Layer 3</strong>.<br><br>
        Overlay = Layer 2 (Ethernet)<br>
        Underlay = Layer 3 (IP routÃ©)<br>
        VxLAN encapsule Layer 2 dans Layer 3
      </div>
    </div>

    <div class="trap-box">
      <div class="trap-title">âŒ PiÃ¨ge #4 : VTEP = routeur</div>
      <div class="trap-content">
        <strong>Pas exactement</strong>. VTEP = point d'encapsulation/dÃ©sencapsulation.<br><br>
        Peut Ãªtre switch ToR (hardware) ou hyperviseur (software).<br>
        Pas forcÃ©ment un routeur.
      </div>
    </div>
  </div>

  <!-- 9. CE QUE COMPTIA PEUT TE POSER -->
  <div class="section">
    <div class="section-label">ğŸ¯ Questions types</div>
    <h2>Ce que CompTIA peut te poser</h2>

    <div class="comptia-box">
      <div class="comptia-title">Question type #1 : Nombre de segments VxLAN</div>
      <div class="comptia-content">
        "Combien de segments VxLAN maximum ?"<br><br>
        <strong>RÃ©ponse : 16,777,216</strong> (VNI = 24 bits, 2^24)
      </div>
    </div>

    <div class="comptia-box">
      <div class="comptia-title">Question type #2 : Port VxLAN</div>
      <div class="comptia-content">
        "Quel port UDP utilise VxLAN ?"<br><br>
        <strong>RÃ©ponse : 4789</strong>
      </div>
    </div>

    <div class="comptia-box">
      <div class="comptia-title">Question type #3 : RÃ´le VTEP</div>
      <div class="comptia-content">
        "C'est quoi un VTEP ?"<br><br>
        <strong>RÃ©ponse : VXLAN Tunnel Endpoint</strong> â€” Ã©quipement qui encapsule/dÃ©sencapsule trames VxLAN (pont entre overlay et underlay)
      </div>
    </div>

    <div class="comptia-box">
      <div class="comptia-title">Question type #4 : Cas d'usage VxLAN</div>
      <div class="comptia-content">
        "Datacenter cloud avec 50,000 clients isolÃ©s. Quelle technologie ?"<br><br>
        <strong>RÃ©ponse : VxLAN</strong><br>
        VLANs limitÃ©s Ã  4096, insuffisants. VxLAN = 16M segments.
      </div>
    </div>
  </div>

  <!-- 10. EXERCICES -->
  <div class="section">
    <div class="section-label">ğŸ§ª Exercices interactifs</div>
    <h2>Teste-toi â€” sans regarder le cours</h2>
    <p style="font-family:'IBM Plex Mono',monospace;font-size:0.75rem;color:var(--muted);margin-bottom:16px;">Clique pour rÃ©vÃ©ler la rÃ©ponse.</p>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">01</span><span class="exq-text">C'est quoi VxLAN ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer">Virtual Extensible LAN â€” technologie encapsulation crÃ©ant rÃ©seaux virtuels Layer 2 (overlay) par-dessus infrastructure IP Layer 3 (underlay). VNI 24 bits = 16M segments.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">02</span><span class="exq-text">DiffÃ©rence overlay vs underlay ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer"><strong>Underlay</strong> : RÃ©seau IP physique Layer 3 qui transporte paquets<br><strong>Overlay</strong> : RÃ©seau virtuel Layer 2 crÃ©Ã© par encapsulation par-dessus underlay</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">03</span><span class="exq-text">C'est quoi un VTEP ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer">VXLAN Tunnel Endpoint â€” Ã©quipement qui encapsule/dÃ©sencapsule trames VxLAN. Pont entre overlay et underlay. Peut Ãªtre switch ToR ou hyperviseur.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">04</span><span class="exq-text">C'est quoi le VNI ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer">VXLAN Network Identifier â€” identifiant 24 bits du segment VxLAN (Ã©quivalent VLAN ID). 2^24 = 16,777,216 VNIs possibles.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">05</span><span class="exq-text">Port UDP VxLAN ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer"><strong>4789 UDP</strong> (destination). Source port = alÃ©atoire pour load balancing.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">06</span><span class="exq-text">Combien de segments VxLAN maximum ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer"><strong>16,777,216</strong> (VNI = 24 bits, 2^24)</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">07</span><span class="exq-text">Question type examen : Datacenter 50,000 clients isolÃ©s. Technologie ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer"><strong>VxLAN</strong> (16M segments). VLANs insuffisants (4096 max).</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">08</span><span class="exq-text">VxLAN = Layer 2 ou Layer 3 ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer"><strong>Layer 2 over Layer 3</strong> â€” overlay L2 transportÃ© par underlay L3</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">09</span><span class="exq-text">Overhead encapsulation VxLAN ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer">~50 bytes (Outer Ethernet 14 + Outer IP 20 + UDP 8 + VxLAN header 8)</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">10</span><span class="exq-text">Limitation VLAN traditionnels ?</span><span class="exq-reveal">â–¼ voir</span></div>
    <div class="exq-answer">4096 VLANs max (12 bits), pas de mobilitÃ© multi-site, dÃ©pendance rÃ©seau physique</div>
  </div>

  <!-- 11. RÃ‰SUMÃ‰ -->
  <div class="section">
    <div class="section-label">RÃ©sumÃ©</div>
    <h2>ğŸ”‘ Ce que tu dois retenir absolument</h2>
    <div>
      <div class="kp"><span class="kp-dot">â†’</span><span><strong>VxLAN</strong> : Layer 2 over Layer 3, overlay network, 16M segments (VNI 24 bits)</span></div>
      <div class="kp"><span class="kp-dot">â†’</span><span><strong>VTEP</strong> : VXLAN Tunnel Endpoint, encapsule/dÃ©sencapsule, pont overlay/underlay</span></div>
      <div class="kp"><span class="kp-dot">â†’</span><span><strong>VNI</strong> : 24 bits = 16,777,216 segments (vs VLAN 12 bits = 4096)</span></div>
      <div class="kp"><span class="kp-dot">â†’</span><span><strong>Port UDP 4789</strong> (destination), source alÃ©atoire pour ECMP</span></div>
      <div class="kp"><span class="kp-dot">â†’</span><span>Encapsulation MAC-in-UDP : Outer Eth + Outer IP + UDP + VxLAN header + Inner frame</span></div>
      <div class="kp"><span class="kp-dot">â†’</span><span>Cas d'usage : datacenters cloud, multi-tenancy, virtualisation, DCI, Kubernetes</span></div>
      <div class="kp"><span class="kp-dot">â†’</span><span>Nouveau en N10-009 â€” sujet datacenter/cloud moderne</span></div>
    </div>
  </div>

  <div class="nav-footer">
    <a class="nav-btn" href="cours-05-port-security">â† Cours 5 : Port Security</a>
    <span style="font-family:'IBM Plex Mono',monospace;font-size:0.7rem;color:var(--muted)">I06 - Phase 2</span>
    <a class="nav-btn next" href="#">Cours 7 : ... â†’</a>
  </div>

</div>
<script>
const MKEY = 'netplus_m2_i06_mastery';
let mastery = [];
try { mastery = JSON.parse(localStorage.getItem(MKEY) || '[]'); } catch(e) {}
function initMastery() {
  document.querySelectorAll('.mcheck').forEach((el, i) => {
    if(mastery[i]) { el.classList.add('done'); el.querySelector('.mcheck-box').classList.add('done'); }
  });
  updateBar();
}
function toggleCheck(el) {
  const i = Array.from(document.querySelectorAll('.mcheck')).indexOf(el);
  const isDone = el.classList.contains('done');
  const box = el.querySelector('.mcheck-box');
  isDone ? (el.classList.remove('done'), box.classList.remove('done'), mastery[i] = false)
         : (el.classList.add('done'), box.classList.add('done'), mastery[i] = true);
  localStorage.setItem(MKEY, JSON.stringify(mastery));
  updateBar();
}
function updateBar() {
  const total = document.querySelectorAll('.mcheck').length;
  const done  = document.querySelectorAll('.mcheck.done').length;
  document.getElementById('mastBar').style.width = Math.round(done/total*100) + '%';
}
function toggleAnswer(exqEl) {
  const answer = exqEl.nextElementSibling;
  const open = answer.classList.contains('visible');
  document.querySelectorAll('.exq-answer').forEach(a => a.classList.remove('visible'));
  document.querySelectorAll('.exq-reveal').forEach(r => r.textContent = 'â–¼ voir');
  if(!open) { answer.classList.add('visible'); exqEl.querySelector('.exq-reveal').textContent = 'â–² cacher'; }
}
initMastery();
</script>
   <div style="margin-top:40px;text-align:center;">
  <a class="nav-btn" href="index.html">â† Accueil â€” Plan de cours</a>
</body>
</html>
