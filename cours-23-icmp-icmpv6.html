<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>C23 ‚Äî ICMP et ICMPv6 ¬∑ Network+</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Epilogue:wght@400;600;800;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #07090f; --bg2: #0d1117; --card: #111826;
    --border: #1c2a3a; --text: #dde4f0; --muted: #536070;
    --accent: #38bdf8; --green: #22d3a0; --amber: #fbbf24;
    --red: #f87171; --purple: #a78bfa;
  }
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body { background: var(--bg); color: var(--text); font-family: 'Epilogue', sans-serif; min-height: 100vh; line-height: 1.75; }
  body::before { content: ''; position: fixed; inset: 0; background-image: radial-gradient(rgba(56,189,248,0.06) 1px, transparent 1px); background-size: 28px 28px; pointer-events: none; z-index: 0; }
  .wrap { max-width: 860px; margin: 0 auto; padding: 48px 20px 100px; position: relative; z-index: 1; }

  .breadcrumb { font-family: 'IBM Plex Mono', monospace; font-size: 0.68rem; color: var(--muted); letter-spacing: 1px; margin-bottom: 24px; display: flex; align-items: center; gap: 8px; }
  .breadcrumb span { color: var(--accent); }
  .pills { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
  .pill { font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; letter-spacing: 1px; text-transform: uppercase; padding: 4px 12px; border-radius: 6px; font-weight: 600; }
  .pill-phase { color: var(--accent); background: rgba(56,189,248,0.08); border: 1px solid rgba(56,189,248,0.2); }
  .pill-key   { color: var(--purple); background: rgba(167,139,250,0.08); border: 1px solid rgba(167,139,250,0.2); }
  .pill-exam  { color: var(--red);    background: rgba(248,113,113,0.08);  border: 1px solid rgba(248,113,113,0.2); }
  .pill-proto { color: var(--green);  background: rgba(34,211,160,0.08);  border: 1px solid rgba(34,211,160,0.2); }
  .pill-diff  { color: var(--amber);  background: rgba(251,191,36,0.08);  border: 1px solid rgba(251,191,36,0.2); }

  h1 { font-size: clamp(1.8rem, 4vw, 2.8rem); font-weight: 900; line-height: 1.05; letter-spacing: -1px; margin-bottom: 8px; }
  h1 span { color: var(--accent); }
  .tagline { font-family: 'IBM Plex Mono', monospace; font-size: 0.78rem; color: var(--muted); margin-bottom: 36px; display: block; }

  .mastery-card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 20px 24px; margin-bottom: 36px; }
  .mastery-title { font-family: 'IBM Plex Mono', monospace; font-size: 0.68rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 14px; }
  .mastery-checks { display: flex; flex-direction: column; gap: 8px; }
  .mcheck { display: flex; align-items: center; gap: 12px; cursor: pointer; user-select: none; padding: 8px 12px; border-radius: 8px; transition: background 0.15s; }
  .mcheck:hover { background: rgba(56,189,248,0.04); }
  .mcheck-box { width: 18px; height: 18px; border: 1.5px solid var(--border); border-radius: 5px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 10px; color: transparent; transition: all 0.18s; }
  .mcheck-box.done { background: var(--green); border-color: var(--green); color: #fff; }
  .mcheck-label { font-size: 0.88rem; transition: color 0.2s; }
  .mcheck.done .mcheck-label { color: var(--muted); text-decoration: line-through; }
  .mastery-bar-wrap { height: 4px; background: var(--border); border-radius: 99px; margin-top: 16px; overflow: hidden; }
  .mastery-bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--green), var(--accent)); border-radius: 99px; transition: width 0.4s ease; }

  .section { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 28px 30px; margin-bottom: 16px; }
  .section-label { font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; color: var(--muted); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 16px; display: flex; align-items: center; gap: 10px; }
  .section-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }
  h2 { font-size: 1.15rem; font-weight: 800; margin-bottom: 14px; }
  h3 { font-size: 0.95rem; font-weight: 700; color: var(--accent); margin: 22px 0 10px; font-family: 'IBM Plex Mono', monospace; }
  p { margin-bottom: 14px; font-size: 0.92rem; }

  .callout { border-radius: 10px; padding: 14px 18px; margin: 14px 0; font-size: 0.88rem; display: flex; gap: 12px; align-items: flex-start; }
  .callout-icon { flex-shrink: 0; font-size: 1rem; margin-top: 1px; }
  .callout-body { flex: 1; line-height: 1.65; }
  .callout-body strong { display: block; margin-bottom: 4px; font-size: 0.85rem; }
  .callout.analogy { background: rgba(167,139,250,0.07); border: 1px solid rgba(167,139,250,0.2); }
  .callout.analogy .callout-body strong { color: var(--purple); }
  .callout.tip  { background: rgba(56,189,248,0.06);  border: 1px solid rgba(56,189,248,0.18); }
  .callout.tip .callout-body strong { color: var(--accent); }
  .callout.warn { background: rgba(248,113,113,0.07); border: 1px solid rgba(248,113,113,0.2); }
  .callout.warn .callout-body strong { color: var(--red); }
  .callout.exam { background: rgba(251,191,36,0.07);  border: 1px solid rgba(251,191,36,0.2); }
  .callout.exam .callout-body strong { color: var(--amber); }
  .callout.ok   { background: rgba(34,211,160,0.07);  border: 1px solid rgba(34,211,160,0.2); }
  .callout.ok .callout-body strong { color: var(--green); }

  .vocab { background: var(--bg2); border-left: 3px solid var(--accent); border-radius: 0 8px 8px 0; padding: 12px 16px; margin: 12px 0; font-size: 0.88rem; }
  .vocab-term { font-family: 'IBM Plex Mono', monospace; color: var(--accent); font-weight: 600; margin-bottom: 4px; }

  .tbl-wrap { overflow-x: auto; margin: 16px 0; }
  table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
  th { background: var(--bg2); color: var(--muted); font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; text-transform: uppercase; letter-spacing: 1px; padding: 10px 14px; text-align: left; border-bottom: 1px solid var(--border); }
  td { padding: 10px 14px; border-bottom: 1px solid rgba(28,42,58,0.6); vertical-align: top; }
  tr:last-child td { border-bottom: none; }
  tr:hover td { background: rgba(56,189,248,0.02); }
  td strong { color: var(--accent); }
  code { font-family: 'IBM Plex Mono', monospace; font-size: 0.8rem; color: var(--accent); background: rgba(56,189,248,0.08); padding: 1px 5px; border-radius: 4px; }

  .trap-box { background: rgba(248,113,113,0.05); border: 2px solid var(--red); border-radius: 10px; padding: 18px 22px; margin: 20px 0; }
  .trap-title { font-family: 'IBM Plex Mono', monospace; font-weight: 800; font-size: 0.85rem; color: var(--red); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px; }
  .trap-content { font-size: 0.88rem; line-height: 1.8; }

  .comptia-box { background: rgba(251,191,36,0.05); border: 2px solid var(--amber); border-radius: 10px; padding: 18px 22px; margin: 20px 0; }
  .comptia-title { font-family: 'IBM Plex Mono', monospace; font-weight: 800; font-size: 0.85rem; color: var(--amber); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px; }
  .comptia-content { font-size: 0.88rem; line-height: 1.8; }

  .kp { display: flex; gap: 10px; align-items: flex-start; font-size: 0.88rem; padding: 9px 0; border-bottom: 1px solid rgba(28,42,58,0.5); }
  .kp:last-child { border-bottom: none; }
  .kp-dot { color: var(--accent); font-weight: 900; flex-shrink: 0; margin-top: 2px; }

  .exq { background: var(--bg2); border: 1px solid var(--border); border-radius: 8px; padding: 12px 16px; margin-bottom: 8px; font-size: 0.85rem; cursor: pointer; display: flex; align-items: flex-start; gap: 12px; transition: border-color 0.2s; }
  .exq:hover { border-color: rgba(56,189,248,0.25); }
  .exq-num { font-family: 'IBM Plex Mono', monospace; color: var(--muted); min-width: 24px; flex-shrink: 0; margin-top: 2px; }
  .exq-text { flex: 1; color: var(--text); }
  .exq-reveal { font-family: 'IBM Plex Mono', monospace; color: var(--muted); font-size: 0.7rem; white-space: nowrap; margin-top: 2px; }
  .exq-answer { display: none; background: rgba(34,211,160,0.06); border: 1px solid rgba(34,211,160,0.2); border-radius: 8px; padding: 12px 16px; font-size: 0.85rem; color: var(--green); margin-bottom: 10px; line-height: 1.8; }
  .exq-answer.visible { display: block; }

  .nav-footer { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; margin-top: 48px; padding-top: 28px; border-top: 1px solid var(--border); }
  .nav-btn { font-family: 'IBM Plex Mono', monospace; font-size: 0.72rem; padding: 10px 18px; border-radius: 8px; transition: all 0.2s; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; border: 1px solid var(--border); background: var(--card); color: var(--muted); }
  .nav-btn.next { background: rgba(56,189,248,0.08); border-color: rgba(56,189,248,0.25); color: var(--accent); }
  .nav-btn.next:hover { background: rgba(56,189,248,0.15); }

  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 99px; }
</style>
</head>
<body>
<div class="wrap">

  <div class="breadcrumb">Network+ N10-009 &nbsp;‚Ä∫&nbsp; <span>Phase 4 ‚Äî Protocoles</span> &nbsp;‚Ä∫&nbsp; Cours 23</div>

  <div class="pills">
    <span class="pill pill-phase">Phase 4 ¬∑ C23</span>
    <span class="pill pill-key">üîë KEY</span>
    <span class="pill pill-exam">‚ö†Ô∏è EXAM</span>
    <span class="pill pill-proto">PROTO</span>
    <span class="pill pill-diff">‚ö°‚ö°‚òÜ Moyen</span>
  </div>

  <h1><span>ICMP</span> et ICMPv6</h1>
  <span class="tagline">// Internet Control Message Protocol ‚Äî messages d'erreur et diagnostics r√©seau</span>

  <div class="mastery-card">
    <div class="mastery-title">Suivi de ma√Ætrise</div>
    <div class="mastery-checks">
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">J'ai lu ce cours en entier</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">Je comprends le r√¥le d'ICMP</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">Je connais ping (Echo Request/Reply)</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">Je ma√Ætrise traceroute et TTL</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">J'ai r√©ussi tous les exercices sans regarder le cours</span></div>
    </div>
    <div class="mastery-bar-wrap"><div class="mastery-bar-fill" id="mastBar"></div></div>
  </div>

  <!-- 1. C'EST QUOI -->
  <div class="section">
    <div class="section-label">Avant de commencer</div>
    <h2>C'est quoi ICMP ‚Äî messages d'erreur et diagnostics</h2>

    <div class="callout analogy">
      <span class="callout-icon">üì¨</span>
      <div class="callout-body">
        <strong>Analogie ‚Äî service des r√©clamations de La Poste</strong>
        Tu envoies un colis (paquet IP). Si probl√®me : adresse erron√©e, destinataire absent, d√©lai d√©pass√© ‚Üí La Poste te renvoie un avis (message ICMP) pour t'expliquer pourquoi le colis n'est pas arriv√©.
      </div>
    </div>

    <p><strong>ICMP (Internet Control Message Protocol)</strong> est un protocole de <strong>couche 3</strong> qui envoie des messages d'erreur et de diagnostic concernant la livraison des paquets IP.</p>

    <p><strong>R√¥le principal :</strong></p>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li>Signaler les erreurs (destination injoignable, TTL expir√©...)</li>
      <li>Tester la connectivit√© (ping)</li>
      <li>D√©couvrir le chemin r√©seau (traceroute)</li>
      <li>Redirection de routes</li>
    </ul>

    <div class="callout tip">
      <span class="callout-icon">üéØ</span>
      <div class="callout-body">
        <strong>Pour l'examen Network+</strong>
        CompTIA teste : types/codes ICMP (Type 0/8 pour ping, Type 3 Destination Unreachable...), TTL et expiration, traceroute, diff√©rences ICMPv6. Connais les types courants par c≈ìur.
      </div>
    </div>

    <div class="callout warn">
      <span class="callout-icon">‚ö†Ô∏è</span>
      <div class="callout-body">
        <strong>ICMP n'est PAS fiable</strong>
        ICMP utilise IP (non fiable). Les messages ICMP peuvent √™tre perdus, bloqu√©s par des pare-feu, ou ignor√©s. Ne jamais s'y fier √† 100% pour le diagnostic.
      </div>
    </div>
  </div>

  <!-- 2. STRUCTURE -->
  <div class="section">
    <div class="section-label">Format du message</div>
    <h2>Structure message ICMP ‚Äî Type, Code, Checksum</h2>

    <p><strong>En-t√™te ICMP (8 octets minimum) :</strong></p>

    <div style="background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:14px 18px;margin:14px 0;font-family:'IBM Plex Mono',monospace;font-size:0.75rem;line-height:1.8;">
      0                   1                   2                   3<br>
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1<br>
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br>
      |     Type      |     Code      |          Checksum             |<br>
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br>
      |                    Rest of Header (variable)                  |<br>
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+<br>
      |                         Data (variable)                       |<br>
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    </div>

    <p><strong>Champs :</strong></p>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li><strong>Type (8 bits)</strong> : Cat√©gorie du message (0 = Echo Reply, 3 = Destination Unreachable...)</li>
      <li><strong>Code (8 bits)</strong> : Sous-cat√©gorie pr√©cise (ex: Type 3 Code 1 = Host Unreachable)</li>
      <li><strong>Checksum (16 bits)</strong> : V√©rification d'int√©grit√© du message ICMP</li>
      <li><strong>Rest of Header</strong> : Varie selon Type/Code</li>
      <li><strong>Data</strong> : Souvent une copie de l'en-t√™te IP + 8 premiers octets du paquet original (pour identifier le paquet en erreur)</li>
    </ul>
  </div>

  <!-- 3. TYPES COURANTS -->
  <div class="section">
    <div class="section-label">Messages principaux</div>
    <h2>Types ICMP courants ‚Äî √† conna√Ætre pour l'examen</h2>

    <div class="tbl-wrap">
      <table>
        <tr><th>Type</th><th>Code</th><th>Nom</th><th>Usage</th></tr>
        <tr><td><strong>0</strong></td><td>0</td><td>Echo Reply</td><td>R√©ponse √† ping</td></tr>
        <tr><td><strong>3</strong></td><td>0</td><td>Destination Network Unreachable</td><td>R√©seau de destination injoignable</td></tr>
        <tr><td><strong>3</strong></td><td>1</td><td>Destination Host Unreachable</td><td>H√¥te injoignable</td></tr>
        <tr><td><strong>3</strong></td><td>2</td><td>Destination Protocol Unreachable</td><td>Protocole non support√©</td></tr>
        <tr><td><strong>3</strong></td><td>3</td><td>Destination Port Unreachable</td><td>Port ferm√©/non √©cout√©</td></tr>
        <tr><td><strong>3</strong></td><td>4</td><td>Fragmentation Needed, DF Set</td><td>Paquet trop gros, fragmentation interdite</td></tr>
        <tr><td><strong>5</strong></td><td>0</td><td>Redirect (network)</td><td>Redirection vers meilleur routeur</td></tr>
        <tr><td><strong>8</strong></td><td>0</td><td>Echo Request</td><td>Ping (demande)</td></tr>
        <tr><td><strong>11</strong></td><td>0</td><td>Time Exceeded (TTL=0)</td><td>TTL expir√© en transit</td></tr>
        <tr><td><strong>11</strong></td><td>1</td><td>Fragment Reassembly Time Exceeded</td><td>Timeout r√©assemblage fragments</td></tr>
      </table>
    </div>

    <div class="callout exam">
      <span class="callout-icon">üéØ</span>
      <div class="callout-body">
        <strong>√Ä m√©moriser absolument</strong>
        <strong>Type 0</strong> = Echo Reply (r√©ponse ping)<br>
        <strong>Type 8</strong> = Echo Request (demande ping)<br>
        <strong>Type 3</strong> = Destination Unreachable (+ Code pour pr√©cision)<br>
        <strong>Type 11</strong> = Time Exceeded (TTL expir√© = traceroute)
      </div>
    </div>
  </div>

  <!-- 4. PING -->
  <div class="section">
    <div class="section-label">Test de connectivit√©</div>
    <h2>Ping ‚Äî Echo Request (Type 8) / Echo Reply (Type 0)</h2>

    <p><strong>Ping</strong> = outil de diagnostic qui envoie des messages ICMP Echo Request et attend des Echo Reply.</p>

    <h3>// Fonctionnement</h3>
    <ol style="margin:10px 0 16px 24px;line-height:1.9">
      <li>Source envoie <strong>ICMP Echo Request (Type 8, Code 0)</strong> √† destination</li>
      <li>Destination re√ßoit, r√©pond avec <strong>ICMP Echo Reply (Type 0, Code 0)</strong></li>
      <li>Source mesure le <strong>RTT (Round-Trip Time)</strong> = temps aller-retour</li>
      <li>R√©p√®te 4 fois par d√©faut (Windows/Linux)</li>
    </ol>

    <div style="background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:14px 18px;margin:14px 0;font-family:'IBM Plex Mono',monospace;font-size:0.75rem;line-height:1.8;">
      <strong style="color:var(--green)">C:\> ping 8.8.8.8</strong><br><br>
      Envoi d'une requ√™te 'Ping' sur 8.8.8.8 avec 32 octets de donn√©es :<br>
      R√©ponse de 8.8.8.8 : octets=32 temps=12 ms TTL=117<br>
      R√©ponse de 8.8.8.8 : octets=32 temps=11 ms TTL=117<br>
      R√©ponse de 8.8.8.8 : octets=32 temps=13 ms TTL=117<br>
      R√©ponse de 8.8.8.8 : octets=32 temps=12 ms TTL=117<br><br>
      
      Statistiques Ping pour 8.8.8.8:<br>
      &nbsp;&nbsp;Paquets : envoy√©s = 4, re√ßus = 4, perdus = 0 (perte 0%),<br>
      Dur√©e approximative des boucles en millisecondes :<br>
      &nbsp;&nbsp;Minimum = 11ms, Maximum = 13ms, Moyenne = 12ms
    </div>

    <h3>// Que teste ping ?</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li><strong>Connectivit√© couche 3</strong> : La destination est-elle joignable via IP ?</li>
      <li><strong>Latence</strong> : Temps de r√©ponse (RTT)</li>
      <li><strong>Perte de paquets</strong> : % de paquets perdus</li>
      <li><strong>R√©solution DNS</strong> : Si on ping un nom (google.com), teste aussi DNS</li>
    </ul>

    <h3>// Messages d'erreur ping</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>Message</th><th>Signification</th></tr>
        <tr><td>"Reply from..."</td><td>‚úÖ Succ√®s, h√¥te joignable</td></tr>
        <tr><td>"Request timed out"</td><td>Pas de r√©ponse (pare-feu, h√¥te down, routage cass√©)</td></tr>
        <tr><td>"Destination host unreachable"</td><td>Routeur local ne sait pas router (pas de route)</td></tr>
        <tr><td>"TTL expired in transit"</td><td>Paquet mort avant d'arriver (boucle routing, TTL trop faible)</td></tr>
      </table>
    </div>

    <div class="callout warn">
      <span class="callout-icon">üî•</span>
      <div class="callout-body">
        <strong>Pare-feu et ping</strong>
        Beaucoup de pare-feu bloquent ICMP Echo Request par d√©faut (s√©curit√©). <strong>Pas de r√©ponse ping ‚â† h√¥te down</strong>. Toujours v√©rifier si ICMP est autoris√© avant de conclure.
      </div>
    </div>
  </div>

  <!-- 5. TTL -->
  <div class="section">
    <div class="section-label">Time To Live</div>
    <h2>TTL ‚Äî emp√™cher les boucles infinies</h2>

    <p><strong>TTL (Time To Live)</strong> = compteur dans l'en-t√™te IP qui d√©cr√©mente de 1 √† chaque routeur travers√©. Quand TTL = 0 ‚Üí paquet d√©truit.</p>

    <h3>// Fonctionnement</h3>
    <ol style="margin:10px 0 16px 24px;line-height:1.9">
      <li>Source cr√©e paquet avec <strong>TTL initial</strong> (64, 128, ou 255 selon OS)</li>
      <li>Chaque routeur re√ßoit le paquet, <strong>d√©cr√©mente TTL de 1</strong></li>
      <li>Si TTL > 0 ‚Üí routeur forward le paquet</li>
      <li>Si TTL = 0 ‚Üí routeur <strong>d√©truit le paquet</strong> et envoie <strong>ICMP Type 11 (Time Exceeded)</strong> √† la source</li>
    </ol>

    <h3>// Valeurs TTL par d√©faut selon OS</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>Syst√®me</th><th>TTL initial</th></tr>
        <tr><td>Windows</td><td>128</td></tr>
        <tr><td>Linux / Android</td><td>64</td></tr>
        <tr><td>macOS / iOS</td><td>64</td></tr>
        <tr><td>Cisco IOS</td><td>255</td></tr>
      </table>
    </div>

    <p><strong>Exemple :</strong> Tu ping Google depuis Windows (TTL=128). La r√©ponse ping montre TTL=117 ‚Üí le paquet a travers√© <strong>128 - 117 = 11 routeurs</strong>.</p>

    <div class="callout ok">
      <span class="callout-icon">üõ°Ô∏è</span>
      <div class="callout-body">
        <strong>Pourquoi TTL existe</strong>
        Emp√™cher les boucles de routage infinies. Si 2 routeurs mal configur√©s se renvoient un paquet en boucle ‚Üí TTL finit par atteindre 0 ‚Üí paquet d√©truit ‚Üí pas de saturation r√©seau.
      </div>
    </div>
  </div>

  <!-- 6. TRACEROUTE -->
  <div class="section">
    <div class="section-label">D√©couverte de chemin</div>
    <h2>Traceroute ‚Äî cartographier le chemin r√©seau</h2>

    <p><strong>Traceroute</strong> (tracert sur Windows) = outil qui d√©couvre le chemin pris par les paquets pour atteindre une destination.</p>

    <h3>// Fonctionnement</h3>
    <p><strong>Traceroute exploite le TTL et ICMP Type 11 (Time Exceeded) :</strong></p>

    <ol style="margin:10px 0 16px 24px;line-height:1.9">
      <li>Envoyer paquet avec <strong>TTL = 1</strong> ‚Üí 1er routeur re√ßoit, d√©cr√©mente (TTL=0), d√©truit, envoie <strong>ICMP Time Exceeded</strong> ‚Üí on d√©couvre 1er routeur</li>
      <li>Envoyer paquet avec <strong>TTL = 2</strong> ‚Üí traverse 1er routeur, 2e routeur d√©cr√©mente (TTL=0), d√©truit, envoie Time Exceeded ‚Üí on d√©couvre 2e routeur</li>
      <li>Envoyer paquet avec <strong>TTL = 3</strong> ‚Üí d√©couvrir 3e routeur</li>
      <li>Continuer jusqu'√† atteindre la destination (qui r√©pond avec Echo Reply ou Port Unreachable)</li>
    </ol>

    <div style="background:var(--bg2);border:1px solid var(--border);border-radius:8px;padding:14px 18px;margin:14px 0;font-family:'IBM Plex Mono',monospace;font-size:0.75rem;line-height:1.8;">
      <strong style="color:var(--green)">C:\> tracert google.com</strong><br><br>
      D√©termination de l'itin√©raire vers google.com [142.250.185.46]<br>
      avec un maximum de 30 sauts :<br><br>

      &nbsp;&nbsp;1    <1 ms    <1 ms    <1 ms  192.168.1.1      ‚Üê Gateway local<br>
      &nbsp;&nbsp;2     2 ms     2 ms     2 ms  10.0.0.1         ‚Üê Routeur ISP<br>
      &nbsp;&nbsp;3     8 ms     9 ms     8 ms  172.16.50.1      ‚Üê Routeur r√©gional<br>
      &nbsp;&nbsp;4    12 ms    11 ms    12 ms  142.250.185.46   ‚Üê Google (destination)<br><br>

      Itin√©raire d√©termin√©.
    </div>

    <h3>// Traceroute Linux vs Windows</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>Crit√®re</th><th>traceroute (Linux)</th><th>tracert (Windows)</th></tr>
        <tr><td>Protocole</td><td>UDP vers port al√©atoire √©lev√© (33434+)</td><td>ICMP Echo Request</td></tr>
        <tr><td>D√©tection destination</td><td>ICMP Port Unreachable</td><td>ICMP Echo Reply</td></tr>
        <tr><td>Commande</td><td><code>traceroute google.com</code></td><td><code>tracert google.com</code></td></tr>
      </table>
    </div>

    <h3>// Interpr√©ter les r√©sultats</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li><strong>* * *</strong> = Timeout. Routeur ne r√©pond pas (ICMP bloqu√© ou routeur silencieux)</li>
      <li><strong>Augmentation soudaine latence</strong> = Congestion ou lien lent √† ce hop</li>
      <li><strong>Perte de paquets intermittente</strong> = Probl√®me de stabilit√© sur ce segment</li>
    </ul>
  </div>

  <!-- 7. ICMPV6 -->
  <div class="section">
    <div class="section-label">Version IPv6</div>
    <h2>ICMPv6 ‚Äî diff√©rences avec ICMP IPv4</h2>

    <p>ICMPv6 fonctionne comme ICMP mais avec des fonctionnalit√©s suppl√©mentaires pour IPv6.</p>

    <h3>// Diff√©rences majeures</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>Fonctionnalit√©</th><th>ICMP (IPv4)</th><th>ICMPv6</th></tr>
        <tr><td>Echo Request/Reply</td><td>Type 8/0</td><td>Type 128/129</td></tr>
        <tr><td>Destination Unreachable</td><td>Type 3</td><td>Type 1</td></tr>
        <tr><td>Time Exceeded</td><td>Type 11</td><td>Type 3</td></tr>
        <tr><td>Neighbor Discovery</td><td>‚ùå ARP (protocole s√©par√©)</td><td>‚úÖ Int√©gr√© ICMPv6 (Type 135/136)</td></tr>
        <tr><td>Router Discovery</td><td>Protocole s√©par√©</td><td>‚úÖ Int√©gr√© ICMPv6 (Type 133/134)</td></tr>
        <tr><td>Importance</td><td>Optionnel (souvent bloqu√©)</td><td>CRITIQUE (ne pas bloquer !)</td></tr>
      </table>
    </div>

    <h3>// Messages ICMPv6 essentiels</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>Type</th><th>Nom</th><th>Usage</th></tr>
        <tr><td><strong>128</strong></td><td>Echo Request</td><td>Ping IPv6</td></tr>
        <tr><td><strong>129</strong></td><td>Echo Reply</td><td>R√©ponse ping IPv6</td></tr>
        <tr><td><strong>133</strong></td><td>Router Solicitation</td><td>Demande de Router Advertisement (SLAAC)</td></tr>
        <tr><td><strong>134</strong></td><td>Router Advertisement</td><td>Annonce pr√©fixe r√©seau (SLAAC)</td></tr>
        <tr><td><strong>135</strong></td><td>Neighbor Solicitation</td><td>√âquivalent ARP Request</td></tr>
        <tr><td><strong>136</strong></td><td>Neighbor Advertisement</td><td>√âquivalent ARP Reply</td></tr>
      </table>
    </div>

    <div class="callout warn">
      <span class="callout-icon">‚ö†Ô∏è</span>
      <div class="callout-body">
        <strong>CRITIQUE ‚Äî Ne jamais bloquer ICMPv6</strong>
        Contrairement √† ICMP IPv4 (souvent bloqu√©), ICMPv6 est ESSENTIEL au fonctionnement d'IPv6 (Neighbor Discovery, Router Discovery, SLAAC...). Bloquer ICMPv6 = casser IPv6 !
      </div>
    </div>
  </div>

  <!-- 8. CE QUI TROMPE LES CANDIDATS -->
  <div class="section">
    <div class="section-label">‚ö†Ô∏è Pi√®ges d'examen</div>
    <h2>Ce qui trompe les candidats</h2>

    <div class="trap-box">
      <div class="trap-title">‚ùå Pi√®ge #1 : Pas de ping = h√¥te down</div>
      <div class="trap-content">
        <strong>FAUX</strong>. Pas de r√©ponse ping peut signifier :<br>
        - Pare-feu bloque ICMP<br>
        - Routeur interm√©diaire bloque ICMP<br>
        - H√¥te configur√© pour ignorer ping<br>
        - H√¥te r√©ellement down<br><br>
        Toujours tester avec d'autres outils (telnet port 80, connexion HTTP...).
      </div>
    </div>

    <div class="trap-box">
      <div class="trap-title">‚ùå Pi√®ge #2 : ICMP = protocole transport</div>
      <div class="trap-content">
        <strong>FAUX</strong>. ICMP est un protocole de <strong>couche 3</strong> (r√©seau), pas couche 4 (transport).<br>
        ICMP utilise IP directement (IP protocol number = 1).
      </div>
    </div>

    <div class="trap-box">
      <div class="trap-title">‚ùå Pi√®ge #3 : Confondre Type Echo Request/Reply</div>
      <div class="trap-content">
        <strong>ICMP IPv4 :</strong><br>
        Type 8 = Echo Request (demande)<br>
        Type 0 = Echo Reply (r√©ponse)<br><br>
        <strong>ICMPv6 :</strong><br>
        Type 128 = Echo Request<br>
        Type 129 = Echo Reply<br><br>
        Ne pas inverser !
      </div>
    </div>

    <div class="trap-box">
      <div class="trap-title">‚ùå Pi√®ge #4 : TTL = dur√©e de vie en secondes</div>
      <div class="trap-content">
        <strong>FAUX</strong>. TTL = nombre de <strong>sauts (hops)</strong>, pas de secondes.<br>
        D√©cr√©mente de 1 √† chaque routeur, pas en fonction du temps.
      </div>
    </div>
  </div>

  <!-- 9. CE QUE COMPTIA PEUT TE POSER -->
  <div class="section">
    <div class="section-label">üéØ Questions types</div>
    <h2>Ce que CompTIA peut te poser</h2>

    <div class="comptia-box">
      <div class="comptia-title">Question type #1 : Identification type ICMP</div>
      <div class="comptia-content">
        "Un administrateur ex√©cute ping. Quel type ICMP est envoy√© initialement ?"<br><br>
        <strong>R√©ponse : Type 8 (Echo Request)</strong>
      </div>
    </div>

    <div class="comptia-box">
      <div class="comptia-title">Question type #2 : Traceroute</div>
      <div class="comptia-content">
        "Comment traceroute d√©couvre-t-il les routeurs interm√©diaires ?"<br><br>
        <strong>R√©ponse :</strong> En incr√©mentant le TTL (1, 2, 3...). Chaque routeur renvoie ICMP Type 11 (Time Exceeded) quand TTL=0, r√©v√©lant son adresse IP.
      </div>
    </div>

    <div class="comptia-box">
      <div class="comptia-title">Question type #3 : Destination Unreachable</div>
      <div class="comptia-content">
        "Un paquet ne peut pas atteindre l'h√¥te de destination. Quel message ICMP est retourn√© ?"<br><br>
        <strong>R√©ponse : Type 3, Code 1 (Destination Host Unreachable)</strong>
      </div>
    </div>

    <div class="comptia-box">
      <div class="comptia-title">Question type #4 : ICMPv6 vs ICMP</div>
      <div class="comptia-content">
        "Quelle est une diff√©rence majeure entre ICMP et ICMPv6 ?"<br><br>
        <strong>R√©ponse :</strong> ICMPv6 int√®gre Neighbor Discovery (remplace ARP) et Router Discovery. ICMPv6 est essentiel au fonctionnement d'IPv6 (ne jamais bloquer).
      </div>
    </div>
  </div>

  <!-- 10. EXERCICES -->
  <div class="section">
    <div class="section-label">üß™ Exercices interactifs</div>
    <h2>Teste-toi ‚Äî sans regarder le cours</h2>
    <p style="font-family:'IBM Plex Mono',monospace;font-size:0.75rem;color:var(--muted);margin-bottom:16px;">Clique pour r√©v√©ler la r√©ponse.</p>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">01</span><span class="exq-text">C'est quoi ICMP ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer">Internet Control Message Protocol ‚Äî protocole couche 3 pour messages d'erreur et diagnostics (ping, traceroute...)</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">02</span><span class="exq-text">Quels sont les types ICMP pour ping ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer">Type <strong>8</strong> = Echo Request (demande)<br>Type <strong>0</strong> = Echo Reply (r√©ponse)</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">03</span><span class="exq-text">C'est quoi le TTL ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer">Time To Live ‚Äî compteur d√©cr√©ment√© de 1 √† chaque routeur. Quand TTL=0 ‚Üí paquet d√©truit, ICMP Type 11 (Time Exceeded) renvoy√©.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">04</span><span class="exq-text">Comment traceroute d√©couvre les routeurs ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer">Envoie paquets avec TTL croissant (1, 2, 3...). Chaque routeur renvoie ICMP Time Exceeded (Type 11) quand TTL=0, r√©v√©lant son IP.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">05</span><span class="exq-text">Question type examen : ICMP Type 3 Code 3 signifie quoi ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer"><strong>Destination Port Unreachable</strong> ‚Äî le port de destination est ferm√© ou aucun service n'√©coute sur ce port.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">06</span><span class="exq-text">Ping fonctionne mais pas de r√©ponse. Causes possibles ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer">1) Pare-feu bloque ICMP<br>2) H√¥te configur√© pour ignorer ping<br>3) Routeur interm√©diaire bloque ICMP<br>‚Üí Tester autre protocole (HTTP, telnet...)</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">07</span><span class="exq-text">Quelle diff√©rence majeure entre ICMP et ICMPv6 ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer">ICMPv6 int√®gre Neighbor Discovery (remplace ARP) et Router Discovery. ICMPv6 = ESSENTIEL pour IPv6 (ne jamais bloquer).</div>
  </div>

  <!-- 11. R√âSUM√â -->
  <div class="section">
    <div class="section-label">R√©sum√©</div>
    <h2>üîë Ce que tu dois retenir absolument</h2>
    <div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>ICMP = protocole couche 3 pour messages d'erreur et diagnostics (ping, traceroute)</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>Ping : Type 8 (Echo Request) ‚Üí Type 0 (Echo Reply). Teste connectivit√© IP.</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>TTL = compteur de sauts (pas de secondes). D√©cr√©mente de 1 par routeur. TTL=0 ‚Üí paquet d√©truit.</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>Traceroute : incr√©mente TTL (1, 2, 3...), chaque routeur renvoie ICMP Type 11 (Time Exceeded)</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>Type 3 = Destination Unreachable (+ Code pour pr√©cision : 1=Host, 3=Port, 4=Frag needed)</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>ICMPv6 : Type 128/129 pour ping, int√®gre Neighbor/Router Discovery. NE JAMAIS BLOQUER.</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>Pas de ping ‚â† h√¥te down (pare-feu ICMP fr√©quent)</span></div>
    </div>
  </div>

  <div class="nav-footer">
    <a class="nav-btn" href="cours-22-ipv6-configuration-transition">‚Üê Cours 22 : IPv6 configuration</a>
    <span style="font-family:'IBM Plex Mono',monospace;font-size:0.7rem;color:var(--muted)">C23 ¬∑ Phase 4</span>
    <a class="nav-btn next" href="cours-24-tcp-protocole-connexion">Cours 24 : TCP ‚Äî protocole orient√© connexion ‚Üí</a>
  </div>

</div>
<script>
const MKEY = 'netplus_c23_mastery';
let mastery = [];
try { mastery = JSON.parse(localStorage.getItem(MKEY) || '[]'); } catch(e) {}
function initMastery() {
  document.querySelectorAll('.mcheck').forEach((el, i) => {
    if(mastery[i]) { el.classList.add('done'); el.querySelector('.mcheck-box').classList.add('done'); }
  });
  updateBar();
}
function toggleCheck(el) {
  const i = Array.from(document.querySelectorAll('.mcheck')).indexOf(el);
  const isDone = el.classList.contains('done');
  const box = el.querySelector('.mcheck-box');
  isDone ? (el.classList.remove('done'), box.classList.remove('done'), mastery[i] = false)
         : (el.classList.add('done'), box.classList.add('done'), mastery[i] = true);
  localStorage.setItem(MKEY, JSON.stringify(mastery));
  updateBar();
}
function updateBar() {
  const total = document.querySelectorAll('.mcheck').length;
  const done  = document.querySelectorAll('.mcheck.done').length;
  document.getElementById('mastBar').style.width = Math.round(done/total*100) + '%';
}
function toggleAnswer(exqEl) {
  const answer = exqEl.nextElementSibling;
  const open = answer.classList.contains('visible');
  document.querySelectorAll('.exq-answer').forEach(a => a.classList.remove('visible'));
  document.querySelectorAll('.exq-reveal').forEach(r => r.textContent = '‚ñº voir');
  if(!open) { answer.classList.add('visible'); exqEl.querySelector('.exq-reveal').textContent = '‚ñ≤ cacher'; }
}
initMastery();
</script>
  <div style="margin-top:40px;text-align:center;">
  <a class="nav-btn" href="index.html">‚Üê Accueil ‚Äî Plan de cours</a>
</body>
</html>
