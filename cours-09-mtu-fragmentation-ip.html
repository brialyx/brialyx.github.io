<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cours 10 ‚Äî MTU et fragmentation IP ¬∑ Network+</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Epilogue:wght@400;600;800;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #07090f; --bg2: #0d1117; --card: #111826;
    --border: #1c2a3a; --text: #dde4f0; --muted: #536070;
    --accent: #38bdf8; --green: #22d3a0; --amber: #fbbf24;
    --red: #f87171; --purple: #a78bfa;
  }
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body { background: var(--bg); color: var(--text); font-family: 'Epilogue', sans-serif; min-height: 100vh; line-height: 1.75; }
  body::before { content: ''; position: fixed; inset: 0; background-image: radial-gradient(rgba(56,189,248,0.06) 1px, transparent 1px); background-size: 28px 28px; pointer-events: none; z-index: 0; }
  .wrap { max-width: 860px; margin: 0 auto; padding: 48px 20px 100px; position: relative; z-index: 1; }

  .breadcrumb { font-family: 'IBM Plex Mono', monospace; font-size: 0.68rem; color: var(--muted); letter-spacing: 1px; margin-bottom: 24px; display: flex; align-items: center; gap: 8px; }
  .breadcrumb span { color: var(--accent); }
  .pills { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; }
  .pill { font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; letter-spacing: 1px; text-transform: uppercase; padding: 4px 12px; border-radius: 6px; font-weight: 600; }
  .pill-phase { color: var(--accent); background: rgba(56,189,248,0.08); border: 1px solid rgba(56,189,248,0.2); }
  .pill-key   { color: var(--purple); background: rgba(167,139,250,0.08); border: 1px solid rgba(167,139,250,0.2); }
  .pill-diff  { color: var(--amber);  background: rgba(251,191,36,0.08);  border: 1px solid rgba(251,191,36,0.2); }

  h1 { font-size: clamp(1.8rem, 4vw, 2.8rem); font-weight: 900; line-height: 1.05; letter-spacing: -1px; margin-bottom: 8px; }
  h1 span { color: var(--accent); }
  .tagline { font-family: 'IBM Plex Mono', monospace; font-size: 0.78rem; color: var(--muted); margin-bottom: 36px; display: block; }

  .mastery-card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 20px 24px; margin-bottom: 36px; }
  .mastery-title { font-family: 'IBM Plex Mono', monospace; font-size: 0.68rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 14px; }
  .mastery-checks { display: flex; flex-direction: column; gap: 8px; }
  .mcheck { display: flex; align-items: center; gap: 12px; cursor: pointer; user-select: none; padding: 8px 12px; border-radius: 8px; transition: background 0.15s; }
  .mcheck:hover { background: rgba(56,189,248,0.04); }
  .mcheck-box { width: 18px; height: 18px; border: 1.5px solid var(--border); border-radius: 5px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 10px; color: transparent; transition: all 0.18s; }
  .mcheck-box.done { background: var(--green); border-color: var(--green); color: #fff; }
  .mcheck-label { font-size: 0.88rem; transition: color 0.2s; }
  .mcheck.done .mcheck-label { color: var(--muted); text-decoration: line-through; }
  .mastery-bar-wrap { height: 4px; background: var(--border); border-radius: 99px; margin-top: 16px; overflow: hidden; }
  .mastery-bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, var(--green), var(--accent)); border-radius: 99px; transition: width 0.4s ease; }

  .section { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 28px 30px; margin-bottom: 16px; }
  .section-label { font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; color: var(--muted); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 16px; display: flex; align-items: center; gap: 10px; }
  .section-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }
  h2 { font-size: 1.15rem; font-weight: 800; margin-bottom: 14px; }
  h3 { font-size: 0.95rem; font-weight: 700; color: var(--accent); margin: 22px 0 10px; font-family: 'IBM Plex Mono', monospace; }
  p { margin-bottom: 14px; font-size: 0.92rem; }

  .callout { border-radius: 10px; padding: 14px 18px; margin: 14px 0; font-size: 0.88rem; display: flex; gap: 12px; align-items: flex-start; }
  .callout-icon { flex-shrink: 0; font-size: 1rem; margin-top: 1px; }
  .callout-body { flex: 1; line-height: 1.65; }
  .callout-body strong { display: block; margin-bottom: 4px; font-size: 0.85rem; }
  .callout.analogy { background: rgba(167,139,250,0.07); border: 1px solid rgba(167,139,250,0.2); }
  .callout.analogy .callout-body strong { color: var(--purple); }
  .callout.tip  { background: rgba(56,189,248,0.06);  border: 1px solid rgba(56,189,248,0.18); }
  .callout.tip .callout-body strong { color: var(--accent); }
  .callout.warn { background: rgba(248,113,113,0.07); border: 1px solid rgba(248,113,113,0.2); }
  .callout.warn .callout-body strong { color: var(--red); }
  .callout.exam { background: rgba(251,191,36,0.07);  border: 1px solid rgba(251,191,36,0.2); }
  .callout.exam .callout-body strong { color: var(--amber); }
  .callout.ok   { background: rgba(34,211,160,0.07);  border: 1px solid rgba(34,211,160,0.2); }
  .callout.ok .callout-body strong { color: var(--green); }

  .vocab { background: var(--bg2); border-left: 3px solid var(--accent); border-radius: 0 8px 8px 0; padding: 12px 16px; margin: 12px 0; font-size: 0.88rem; }
  .vocab-term { font-family: 'IBM Plex Mono', monospace; color: var(--accent); font-weight: 600; margin-bottom: 4px; }

  .tbl-wrap { overflow-x: auto; margin: 16px 0; }
  table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
  th { background: var(--bg2); color: var(--muted); font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; text-transform: uppercase; letter-spacing: 1px; padding: 10px 14px; text-align: left; border-bottom: 1px solid var(--border); }
  td { padding: 10px 14px; border-bottom: 1px solid rgba(28,42,58,0.6); vertical-align: top; }
  tr:last-child td { border-bottom: none; }
  tr:hover td { background: rgba(56,189,248,0.02); }
  td strong { color: var(--accent); }
  code { font-family: 'IBM Plex Mono', monospace; font-size: 0.8rem; color: var(--accent); background: rgba(56,189,248,0.08); padding: 1px 5px; border-radius: 4px; }

  .kp { display: flex; gap: 10px; align-items: flex-start; font-size: 0.88rem; padding: 9px 0; border-bottom: 1px solid rgba(28,42,58,0.5); }
  .kp:last-child { border-bottom: none; }
  .kp-dot { color: var(--accent); font-weight: 900; flex-shrink: 0; margin-top: 2px; }

  .exq { background: var(--bg2); border: 1px solid var(--border); border-radius: 8px; padding: 12px 16px; margin-bottom: 8px; font-size: 0.85rem; cursor: pointer; display: flex; align-items: flex-start; gap: 12px; transition: border-color 0.2s; }
  .exq:hover { border-color: rgba(56,189,248,0.25); }
  .exq-num { font-family: 'IBM Plex Mono', monospace; color: var(--muted); min-width: 24px; flex-shrink: 0; margin-top: 2px; }
  .exq-text { flex: 1; color: var(--text); }
  .exq-reveal { font-family: 'IBM Plex Mono', monospace; color: var(--muted); font-size: 0.7rem; white-space: nowrap; margin-top: 2px; }
  .exq-answer { display: none; background: rgba(34,211,160,0.06); border: 1px solid rgba(34,211,160,0.2); border-radius: 8px; padding: 12px 16px; font-size: 0.85rem; color: var(--green); margin-bottom: 10px; line-height: 1.8; }
  .exq-answer.visible { display: block; }

  .nav-footer { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; margin-top: 48px; padding-top: 28px; border-top: 1px solid var(--border); }
  .nav-btn { font-family: 'IBM Plex Mono', monospace; font-size: 0.72rem; padding: 10px 18px; border-radius: 8px; transition: all 0.2s; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; border: 1px solid var(--border); background: var(--card); color: var(--muted); }
  .nav-btn.next { background: rgba(56,189,248,0.08); border-color: rgba(56,189,248,0.25); color: var(--accent); }
  .nav-btn.next:hover { background: rgba(56,189,248,0.15); }

  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 99px; }
</style>
</head>
<body>
<div class="wrap">

  <div class="breadcrumb">Network+ N10-009 &nbsp;‚Ä∫&nbsp; <span>Phase 1 ‚Äî Fondamentaux</span> &nbsp;‚Ä∫&nbsp; Cours 10</div>

  <div class="pills">
    <span class="pill pill-phase">Phase 1 ¬∑ C10</span>
    <span class="pill pill-key">üîë KEY</span>
    <span class="pill pill-diff">‚ö°‚ö°‚òÜ Moyen</span>
  </div>

  <h1>MTU et <span>Fragmentation IP</span></h1>
  <span class="tagline">// Maximum Transmission Unit ‚Äî quand les paquets sont trop gros pour passer</span>

  <div class="mastery-card">
    <div class="mastery-title">Suivi de ma√Ætrise</div>
    <div class="mastery-checks">
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">J'ai lu ce cours en entier</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">Je comprends ce qu'est le MTU</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">Je sais comment fonctionne la fragmentation IP</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">Je connais PMTUD et les jumbo frames</span></div>
      <div class="mcheck" onclick="toggleCheck(this)"><div class="mcheck-box">‚úì</div><span class="mcheck-label">J'ai r√©ussi tous les exercices sans regarder le cours</span></div>
    </div>
    <div class="mastery-bar-wrap"><div class="mastery-bar-fill" id="mastBar"></div></div>
  </div>

  <!-- 1. C'EST QUOI -->
  <div class="section">
    <div class="section-label">Avant de commencer</div>
    <h2>C'est quoi le MTU ‚Äî taille maximum d'un paquet</h2>

    <div class="callout analogy">
      <span class="callout-icon">üì¶</span>
      <div class="callout-body">
        <strong>Analogie ‚Äî limite de poids d'un ascenseur</strong>
        Le MTU, c'est comme la charge maximum d'un ascenseur. Si ton colis p√®se 800 kg mais l'ascenseur ne supporte que 500 kg ‚Üí tu dois d√©couper le colis en 2 morceaux de 400 kg chacun et faire 2 voyages. C'est la fragmentation.
      </div>
    </div>

    <p><strong>MTU</strong> (Maximum Transmission Unit) = la taille maximum de donn√©es qu'une interface r√©seau peut transmettre <strong>en une seule trame</strong>.</p>

    <p><strong>MTU Ethernet standard = 1500 octets</strong></p>

    <p>Rappel de la trame Ethernet :</p>
    <ul style="margin:10px 0 16px 24px;line-height:1.9;font-family:'IBM Plex Mono',monospace;font-size:0.85rem">
      <li>En-t√™te Ethernet : 18 octets (MAC dest 6 + MAC src 6 + EtherType 2 + FCS 4)</li>
      <li>Payload : <strong>1500 octets maximum</strong> ‚Üê c'est le MTU</li>
      <li>Trame totale : 1518 octets max</li>
    </ul>

    <p>Le MTU de <strong>1500 octets</strong> est la taille max du <strong>paquet IP</strong> (en-t√™te IP + donn√©es) qu'on peut transporter dans une trame Ethernet.</p>

    <div class="callout tip">
      <span class="callout-icon">üéØ</span>
      <div class="callout-body">
        <strong>Pour l'examen Network+</strong>
        Retiens : MTU Ethernet standard = <strong>1500 octets</strong>. CompTIA teste les probl√®mes de fragmentation, PMTUD, et les jumbo frames. Sache reconna√Ætre les sympt√¥mes d'un MTU mal configur√©.
      </div>
    </div>
  </div>

  <!-- 2. VOCABULAIRE -->
  <div class="section">
    <div class="section-label">Vocabulaire essentiel</div>
    <h2>Les mots cl√©s de ce cours</h2>

    <div class="vocab">
      <div class="vocab-term">MTU (Maximum Transmission Unit)</div>
      <div>Taille maximum de donn√©es (payload) qu'une interface peut transmettre en une seule trame. Standard Ethernet = 1500 octets.</div>
    </div>
    <div class="vocab">
      <div class="vocab-term">Fragmentation IP</div>
      <div>Processus qui consiste √† d√©couper un gros paquet IP en plusieurs petits fragments pour respecter le MTU du r√©seau.</div>
    </div>
    <div class="vocab">
      <div class="vocab-term">Reassembly (R√©assemblage)</div>
      <div>Processus inverse : reconstituer le paquet original √† partir des fragments re√ßus. Fait par le destinataire final uniquement.</div>
    </div>
    <div class="vocab">
      <div class="vocab-term">Don't Fragment (DF)</div>
      <div>Flag dans l'en-t√™te IP qui interdit la fragmentation. Si un routeur doit fragmenter mais que DF=1 ‚Üí il rejette le paquet et envoie un message ICMP "Fragmentation Needed".</div>
    </div>
    <div class="vocab">
      <div class="vocab-term">PMTUD (Path MTU Discovery)</div>
      <div>M√©canisme qui permet de d√©couvrir automatiquement le MTU le plus petit sur le chemin entre source et destination.</div>
    </div>
    <div class="vocab">
      <div class="vocab-term">Jumbo Frames</div>
      <div>Trames Ethernet avec un MTU sup√©rieur √† 1500 octets (g√©n√©ralement 9000 octets). Utilis√©es en datacenter pour am√©liorer les performances.</div>
    </div>
    <div class="vocab">
      <div class="vocab-term">MSS (Maximum Segment Size)</div>
      <div>Taille max des donn√©es TCP (sans l'en-t√™te TCP/IP). MSS = MTU - 40 octets (20 IP + 20 TCP). Pour MTU 1500 ‚Üí MSS = 1460.</div>
    </div>
  </div>

  <!-- 3. FRAGMENTATION -->
  <div class="section">
    <div class="section-label">D√©coupage des paquets</div>
    <h2>La fragmentation IP ‚Äî quand un paquet est trop gros</h2>

    <h3>// Le probl√®me</h3>
    <p>Imagine : un ordinateur envoie un paquet IP de <strong>3000 octets</strong>, mais le r√©seau interm√©diaire a un MTU de <strong>1500 octets</strong>. Le paquet ne passe pas.</p>

    <p><strong>Solution :</strong> Le routeur <strong>fragmente</strong> le gros paquet en plusieurs petits fragments qui passent dans le MTU.</p>

    <h3>// Comment √ßa fonctionne</h3>
    <p><strong>Exemple concret :</strong> Paquet de 3000 octets, MTU 1500</p>

    <div class="tbl-wrap">
      <table>
        <tr><th>Fragment</th><th>Taille donn√©es</th><th>Offset</th><th>Flag "More Fragments"</th></tr>
        <tr>
          <td>Fragment 1</td>
          <td>1480 octets (MTU 1500 - 20 octets en-t√™te IP)</td>
          <td>0</td>
          <td>1 (il y a d'autres fragments apr√®s)</td>
        </tr>
        <tr>
          <td>Fragment 2</td>
          <td>1480 octets</td>
          <td>1480</td>
          <td>1</td>
        </tr>
        <tr>
          <td>Fragment 3</td>
          <td>40 octets (le reste)</td>
          <td>2960</td>
          <td>0 (c'est le dernier)</td>
        </tr>
      </table>
    </div>

    <p><strong>√âtapes :</strong></p>
    <ol style="margin:10px 0 16px 24px;line-height:1.9">
      <li>Le routeur re√ßoit un paquet de 3000 octets</li>
      <li>MTU du lien suivant = 1500 ‚Üí impossible de passer</li>
      <li>Le routeur d√©coupe le paquet en 3 fragments</li>
      <li>Chaque fragment a son propre en-t√™te IP avec un <strong>Identification</strong> identique</li>
      <li>Chaque fragment indique son <strong>Offset</strong> (position dans le paquet original)</li>
      <li>Tous les fragments sont envoy√©s s√©par√©ment</li>
      <li>Le <strong>destinataire final</strong> r√©assemble les fragments dans le bon ordre</li>
    </ol>

    <div class="callout warn">
      <span class="callout-icon">‚ö†Ô∏è</span>
      <div class="callout-body">
        <strong>Probl√®mes de la fragmentation</strong>
        <strong>Performance d√©grad√©e</strong> : Plus de paquets √† traiter, plus d'overhead<br>
        <strong>Perte d'un fragment = perte totale</strong> : Si un seul fragment est perdu ‚Üí tout le paquet doit √™tre retransmis<br>
        <strong>Surcharge des routeurs</strong> : La fragmentation co√ªte du CPU<br>
        <strong>Blocage par certains pare-feu</strong> : Certains pare-feu rejettent les fragments par s√©curit√©
      </div>
    </div>

    <h3>// Le flag Don't Fragment (DF)</h3>
    <p>Un paquet IP peut avoir un flag <strong>DF (Don't Fragment)</strong> activ√© dans son en-t√™te. Si DF=1, le routeur <strong>ne peut PAS fragmenter</strong> le paquet.</p>

    <p><strong>Que se passe-t-il alors ?</strong></p>
    <ol style="margin:10px 0 16px 24px;line-height:1.9">
      <li>Le routeur constate que le paquet est trop gros pour le MTU</li>
      <li>Il voit que DF=1 ‚Üí fragmentation interdite</li>
      <li>Il <strong>rejette le paquet</strong></li>
      <li>Il envoie un message <strong>ICMP Type 3 Code 4</strong> √† l'√©metteur : "Fragmentation Needed and DF Set"</li>
      <li>Le message ICMP contient le MTU du lien probl√©matique</li>
      <li>L'√©metteur ajuste sa taille de paquet et renvoie</li>
    </ol>

    <p>C'est le m√©canisme utilis√© par <strong>PMTUD</strong>.</p>
  </div>

  <!-- 4. PMTUD -->
  <div class="section">
    <div class="section-label">D√©couverte automatique du MTU</div>
    <h2>PMTUD ‚Äî Path MTU Discovery</h2>

    <p><strong>PMTUD</strong> (Path MTU Discovery) est un m√©canisme qui permet √† un h√¥te de d√©couvrir automatiquement le <strong>MTU le plus petit</strong> sur le chemin entre lui et le destinataire.</p>

    <h3>// Comment PMTUD fonctionne</h3>
    <p><strong>√âtape par √©tape :</strong></p>
    <ol style="margin:10px 0 16px 24px;line-height:1.9">
      <li>L'ordinateur A envoie des paquets vers B avec <strong>DF=1</strong> (Don't Fragment)</li>
      <li>Les paquets ont une taille = MTU de l'interface locale (ex: 1500 octets)</li>
      <li>Si un routeur interm√©diaire a un MTU plus petit (ex: 1400), il ne peut pas fragmenter (DF=1)</li>
      <li>Le routeur rejette le paquet et envoie <strong>ICMP "Fragmentation Needed"</strong> avec le MTU du lien (1400)</li>
      <li>L'ordinateur A re√ßoit le message ICMP</li>
      <li>Il r√©duit sa taille de paquet √† 1400 octets et renvoie</li>
      <li>Les paquets passent maintenant ‚úÖ</li>
    </ol>

    <p><strong>R√©sultat :</strong> L'ordinateur A d√©couvre que le MTU du chemin = 1400 octets et ajuste automatiquement. Plus besoin de fragmentation.</p>

    <div class="callout ok">
      <span class="callout-icon">‚úÖ</span>
      <div class="callout-body">
        <strong>Avantages de PMTUD</strong>
        √âvite la fragmentation (meilleure performance)<br>
        D√©couverte automatique du MTU optimal<br>
        R√©duit la charge sur les routeurs interm√©diaires
      </div>
    </div>

    <h3>// Probl√®mes avec PMTUD</h3>
    <div class="callout warn">
      <span class="callout-icon">‚ö†Ô∏è</span>
      <div class="callout-body">
        <strong>PMTUD Black Hole</strong>
        Certains pare-feu ou routeurs mal configur√©s <strong>bloquent les messages ICMP</strong>. R√©sultat : l'√©metteur n'apprend jamais que le MTU est trop petit ‚Üí les paquets sont rejet√©s silencieusement ‚Üí connexion bloqu√©e. C'est un "PMTUD Black Hole". Solution : activer TCP MSS Clamping sur les routeurs de bordure.
      </div>
    </div>
  </div>

  <!-- 5. JUMBO FRAMES -->
  <div class="section">
    <div class="section-label">MTU √©tendu</div>
    <h2>Jumbo Frames ‚Äî MTU jusqu'√† 9000 octets</h2>

    <p>Les <strong>Jumbo Frames</strong> sont des trames Ethernet avec un MTU sup√©rieur √† la limite standard de 1500 octets. G√©n√©ralement <strong>9000 octets</strong> en datacenter.</p>

    <h3>// Avantages des jumbo frames</h3>
    <ul style="margin:10px 0 16px 24px;line-height:1.9">
      <li><strong>Moins d'overhead</strong> : Moins de trames √† envoyer pour la m√™me quantit√© de donn√©es ‚Üí moins d'en-t√™tes</li>
      <li><strong>Moins de CPU utilis√©</strong> : Moins de paquets √† traiter par le processeur</li>
      <li><strong>Meilleur d√©bit</strong> : Particuli√®rement visible pour les gros transferts (backups, stockage r√©seau, virtualisation)</li>
    </ul>

    <h3>// Inconv√©nients et contraintes</h3>
    <div class="callout warn">
      <span class="callout-icon">‚ö†Ô∏è</span>
      <div class="callout-body">
        <strong>Contraintes des jumbo frames</strong>
        <strong>Tous les √©quipements doivent supporter</strong> : Switches, routeurs, cartes r√©seau, c√¢bles. Un seul √©quipement incompatible ‚Üí √ßa casse tout.<br>
        <strong>Configuration manuelle</strong> : Il faut activer jumbo frames sur chaque interface de chaque √©quipement.<br>
        <strong>Fragmentation d√©sastreuse</strong> : Si un √©quipement ne supporte pas ‚Üí fragmentation massive ‚Üí pire performance qu'avant.<br>
        <strong>Limit√© au r√©seau local</strong> : Internet ne supporte que MTU 1500 ‚Üí jumbo frames uniquement en LAN/datacenter.
      </div>
    </div>

    <h3>// MTU communs selon le type de r√©seau</h3>
    <div class="tbl-wrap">
      <table>
        <tr><th>Type de r√©seau</th><th>MTU typique</th><th>Usage</th></tr>
        <tr><td>Ethernet standard</td><td>1500 octets</td><td>R√©seau local classique, Internet</td></tr>
        <tr><td>Jumbo Frames</td><td>9000 octets</td><td>Datacenter, stockage r√©seau (iSCSI, NFS)</td></tr>
        <tr><td>PPPoE (ADSL, fibre)</td><td>1492 octets</td><td>Connexion Internet via PPPoE (overhead de 8 octets)</td></tr>
        <tr><td>VPN IPsec</td><td>1400-1440 octets</td><td>Tunnels VPN (overhead des en-t√™tes de tunnel)</td></tr>
        <tr><td>Token Ring (ancien)</td><td>4464 octets</td><td>Obsol√®te</td></tr>
        <tr><td>Loopback (localhost)</td><td>65536 octets</td><td>Trafic interne √† la machine</td></tr>
      </table>
    </div>
  </div>

  <!-- 6. MSS -->
  <div class="section">
    <div class="section-label">Optimisation TCP</div>
    <h2>MSS ‚Äî Maximum Segment Size</h2>

    <p>Le <strong>MSS</strong> (Maximum Segment Size) est la taille maximum des <strong>donn√©es TCP</strong> (sans compter les en-t√™tes IP et TCP).</p>

    <h3>// Calcul du MSS</h3>
    <p><strong>MSS = MTU - En-t√™te IP - En-t√™te TCP</strong></p>
    <p><strong>MSS = MTU - 40 octets</strong> (20 octets IP + 20 octets TCP)</p>

    <p><strong>Exemples :</strong></p>
    <ul style="margin:10px 0 16px 24px;line-height:1.9;font-family:'IBM Plex Mono',monospace;font-size:0.85rem">
      <li>MTU 1500 ‚Üí MSS = 1500 - 40 = <strong>1460 octets</strong></li>
      <li>MTU 9000 (jumbo) ‚Üí MSS = 9000 - 40 = <strong>8960 octets</strong></li>
      <li>MTU 1492 (PPPoE) ‚Üí MSS = 1492 - 40 = <strong>1452 octets</strong></li>
    </ul>

    <h3>// N√©gociation du MSS</h3>
    <p>Pendant l'√©tablissement d'une connexion TCP (three-way handshake), les deux extr√©mit√©s s'√©changent leur MSS maximum dans les paquets SYN et SYN-ACK. Les deux parties utilisent ensuite le <strong>MSS le plus petit</strong>.</p>

    <h3>// MSS Clamping</h3>
    <p><strong>MSS Clamping</strong> est une technique utilis√©e par les routeurs pour forcer un MSS maximum. Le routeur intercepte les paquets SYN et modifie la valeur MSS annonc√©e pour qu'elle soit compatible avec le MTU du lien WAN.</p>

    <p><strong>Exemple :</strong> Connexion PPPoE avec MTU 1492. Le routeur force MSS = 1452 dans les paquets SYN pour √©viter la fragmentation.</p>
  </div>

  <!-- 7. EXERCICES -->
  <div class="section">
    <div class="section-label">üß™ Exercices interactifs</div>
    <h2>Teste-toi ‚Äî sans regarder le cours</h2>
    <p style="font-family:'IBM Plex Mono',monospace;font-size:0.75rem;color:var(--muted);margin-bottom:16px;">Clique pour r√©v√©ler la r√©ponse.</p>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">01</span><span class="exq-text">Quel est le MTU standard Ethernet ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer"><strong>1500 octets</strong>. C'est la taille max du payload (paquet IP) dans une trame Ethernet standard.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">02</span><span class="exq-text">Que se passe-t-il si un paquet est trop gros pour le MTU et que le flag Don't Fragment (DF) est activ√© ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer">Le routeur <strong>rejette le paquet</strong> et envoie un message <strong>ICMP "Fragmentation Needed and DF Set"</strong> √† l'√©metteur avec le MTU du lien probl√©matique.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">03</span><span class="exq-text">C'est quoi PMTUD ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer"><strong>Path MTU Discovery</strong> ‚Äî m√©canisme qui d√©couvre automatiquement le MTU le plus petit sur le chemin. Utilise le flag DF=1 et les messages ICMP "Fragmentation Needed".</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">04</span><span class="exq-text">Quelle est la taille typique d'une jumbo frame ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer"><strong>9000 octets</strong> de MTU. Utilis√©e en datacenter pour am√©liorer les performances des gros transferts.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">05</span><span class="exq-text">Calcule le MSS pour un MTU de 1500 octets.</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer">MSS = MTU - 40 (20 IP + 20 TCP) = 1500 - 40 = <strong>1460 octets</strong></div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">06</span><span class="exq-text">Question type examen : Un utilisateur se plaint que certains sites web ne chargent pas compl√®tement (connexion bloqu√©e apr√®s SYN-ACK). Le MTU de la connexion est 1492 (PPPoE). Quelle est la cause probable ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer"><strong>PMTUD Black Hole</strong>. Le pare-feu bloque les messages ICMP "Fragmentation Needed" ‚Üí l'√©metteur n'apprend jamais que le MTU est trop petit ‚Üí paquets trop gros rejet√©s silencieusement. Solution : MSS Clamping sur le routeur.</div>

    <div class="exq" onclick="toggleAnswer(this)"><span class="exq-num">07</span><span class="exq-text">Question type examen : Un datacenter active les jumbo frames (MTU 9000) sur tous les serveurs mais pas sur un switch. Quel sera le r√©sultat ?</span><span class="exq-reveal">‚ñº voir</span></div>
    <div class="exq-answer"><strong>Fragmentation massive</strong> au niveau du switch incompatible ‚Üí performance catastrophique, pire qu'avec MTU 1500 standard. Il faut que TOUS les √©quipements supportent jumbo frames.</div>
  </div>

  <!-- 8. R√âSUM√â -->
  <div class="section">
    <div class="section-label">R√©sum√©</div>
    <h2>üîë Ce que tu dois retenir absolument</h2>
    <div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>MTU standard Ethernet = <strong>1500 octets</strong> (taille max du paquet IP)</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>Fragmentation = d√©couper un gros paquet en fragments pour respecter le MTU</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>Flag DF=1 (Don't Fragment) interdit la fragmentation ‚Üí routeur rejette + ICMP "Fragmentation Needed"</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>PMTUD = d√©couverte auto du MTU du chemin via DF=1 + messages ICMP</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>Jumbo frames = MTU 9000 octets, datacenter uniquement, TOUS les √©quipements doivent supporter</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>MSS = MTU - 40 octets. MTU 1500 ‚Üí MSS 1460</span></div>
      <div class="kp"><span class="kp-dot">‚Üí</span><span>PMTUD Black Hole = pare-feu bloque ICMP ‚Üí paquets trop gros rejet√©s silencieusement</span></div>
    </div>
  </div>

  <div class="nav-footer">
    <a class="nav-btn" href="#">‚Üê Cours 09 : Structure de la trame Ethernet</a>
    <span style="font-family:'IBM Plex Mono',monospace;font-size:0.7rem;color:var(--muted)">C10 ¬∑ Phase 1</span>
    <a class="nav-btn next" href="#">Cours 11 : Topologies r√©seau ‚Üí</a>
  </div>

</div>
<script>
const MKEY = 'netplus_c10_mastery';
let mastery = [];
try { mastery = JSON.parse(localStorage.getItem(MKEY) || '[]'); } catch(e) {}
function initMastery() {
  document.querySelectorAll('.mcheck').forEach((el, i) => {
    if(mastery[i]) { el.classList.add('done'); el.querySelector('.mcheck-box').classList.add('done'); }
  });
  updateBar();
}
function toggleCheck(el) {
  const i = Array.from(document.querySelectorAll('.mcheck')).indexOf(el);
  const isDone = el.classList.contains('done');
  const box = el.querySelector('.mcheck-box');
  isDone ? (el.classList.remove('done'), box.classList.remove('done'), mastery[i] = false)
         : (el.classList.add('done'), box.classList.add('done'), mastery[i] = true);
  localStorage.setItem(MKEY, JSON.stringify(mastery));
  updateBar();
}
function updateBar() {
  const total = document.querySelectorAll('.mcheck').length;
  const done  = document.querySelectorAll('.mcheck.done').length;
  document.getElementById('mastBar').style.width = Math.round(done/total*100) + '%';
}
function toggleAnswer(exqEl) {
  const answer = exqEl.nextElementSibling;
  const open = answer.classList.contains('visible');
  document.querySelectorAll('.exq-answer').forEach(a => a.classList.remove('visible'));
  document.querySelectorAll('.exq-reveal').forEach(r => r.textContent = '‚ñº voir');
  if(!open) { answer.classList.add('visible'); exqEl.querySelector('.exq-reveal').textContent = '‚ñ≤ cacher'; }
}
initMastery();
</script>
</body>
</html>
